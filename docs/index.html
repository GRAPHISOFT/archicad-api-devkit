<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Archicad C++ API" />
<meta property="og:image" content="logo.svg" />
<meta property="og:description" content="Archicad Development Kit Documentation, best practices, example codes and information hub." />
<meta property="og:url" content="https://archicadapi.graphisoft.com/documentation/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="logo.svg" />
<meta name="twitter:title" content="Archicad C++ API" />
<meta name="twitter:description" content="Archicad Development Kit Documentation, best practices, example codes and information hub." />
<!-- END twitter metadata -->
<title>Archicad 29 C++ API: Archicad 29 C++ API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="https://fonts.cdnfonts.com/css/proxima-nova-2" rel="stylesheet">
<link rel="icon" href="logo.svg" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Archicad 29 C++ API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Archicad 29 C++ API </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md18"></a>
Getting started with Archicad Add-Ons</h2>
<p>The goal of this tutorial is to show you how to write an Archicad Add-On from scratch.</p>
<h2><a class="anchor" id="autotoc_md19"></a>
Archicad Add-On Basics</h2>
<p>The programming language of Archicad Add-Ons is C++, so you have to be familiar with this language to start. Archicad is extensible in several ways: creating new menu commands and dialogs, import-export functionalities, etc. The API itself is general purpose, so you can write various Add-Ons with the same Development Kit.</p>
<h2><a class="anchor" id="autotoc_md20"></a>
What will You Need?</h2>
<p>First, you will have to set up your development environment:</p>
<ul>
<li><a href="https://graphisoft.com/try-archicad">Archicad</a> - The demo version is perfectly fine for experimenting with the API, but it has some restrictions that you may experience during the development process.</li>
<li><a href="http://archicadapi.graphisoft.com/downloads/api-development-kit">API Development Kit</a> - This will allow you to build Archicad Add-Ons on your computer.</li>
<li><a href="https://cmake.org/">CMake</a> - To generate IDE projects (3.16 minimum version is needed).</li>
<li><a href="https://www.python.org/">Python</a> - For some build tools (version 2.7+ or 3.8+).</li>
<li>Depending on your platform you will need a development environment. On Windows this is <b>Microsoft Visual Studio</b>, on MacOS this is <b>Xcode</b>.</li>
</ul>
<p>For different Archicad versions you will have to use different versions of developer environments. You can see the details in the table below.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone">Windows   </th><th class="markdownTableHeadNone">MacOS    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Archicad 23   </td><td class="markdownTableBodyNone">Visual Studio 2017 (v141 toolset)   </td><td class="markdownTableBodyNone">Latest Xcode (deployment target macOS 10.12)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Archicad 24   </td><td class="markdownTableBodyNone">Visual Studio 2017 (v141 toolset)   </td><td class="markdownTableBodyNone">Latest Xcode (deployment target macOS 10.13)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Archicad 25   </td><td class="markdownTableBodyNone">Visual Studio 2019 (v142 toolset)   </td><td class="markdownTableBodyNone">Latest Xcode (deployment target macOS 10.15)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Archicad 26   </td><td class="markdownTableBodyNone">Visual Studio 2019 (v142 toolset)   </td><td class="markdownTableBodyNone">Latest Xcode (deployment target macOS 10.15)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Archicad 27   </td><td class="markdownTableBodyNone">Visual Studio 2019 (v142 toolset)   </td><td class="markdownTableBodyNone">Latest Xcode (deployment target macOS 10.15)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Archicad 28   </td><td class="markdownTableBodyNone">Visual Studio 2019 (v142 toolset)   </td><td class="markdownTableBodyNone">Latest Xcode (deployment target macOS 13.0)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Archicad 29   </td><td class="markdownTableBodyNone">Visual Studio 2022 (v143 toolset)   </td><td class="markdownTableBodyNone">Latest Xcode (deployment target macOS 15.1)   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md21"></a>
Structure of the API Development Kit</h2>
<p>After you installed the Development Kit you will find three folders at the install location.</p>
<ul>
<li><b>Documentation:</b> This is the folder for API documentation. You can find here a reference for all of the API functions. <a href="http://archicadapi.graphisoft.com/api-reference">The documentation is available online, too.</a></li>
<li><b>Examples:</b> Here you can find a lot of example Add-Ons. These can be a good starting point to understand how the API works. Feel free to open the IDE projects, and investigate the possibilities.</li>
<li><b>Support:</b> This is the most important folder. It contains all the header and library files for Add-On development, and the tools for resource compilation. This is the folder you will need to build your Add-On.</li>
</ul>
<h2><a class="anchor" id="autotoc_md22"></a>
Let's Build Your First Add-On</h2>
<p>You can start with one of the example Add-Ons, but it's much easier to start with the template available on GitHub. <a href="https://github.com/GRAPHISOFT/archicad-addon-cmake">Download the Archicad Add-On template from here.</a></p>
<h3><a class="anchor" id="autotoc_md23"></a>
Generate IDE Project for the Add-On</h3>
<p>After you downloaded the <a href="https://github.com/GRAPHISOFT/archicad-addon-cmake">template Add-On</a>, you have to use CMake to generate the project for your favourite Development Environment. Starting from the root folder you can generate the projects with the commands below. Make sure to replace the value of AC_API_DEVKIT_DIR variable with your DevKit installation folder.</p>
<p>On Windows: </p><pre class="fragment">mkdir Build
cd Build
cmake -G "Visual Studio 17 2022" -A "x64" -DAC\_API\_DEVKIT\_DIR="C:\\API Development Kit 29.&lt;release build number&gt;" ..
cd ..
</pre><p>On MacOS </p><pre class="fragment">mkdir Build
cd Build
cmake -G "Xcode" -DAC\_API\_DEVKIT\_DIR=/Applications/GRAPHISOFT\\ ARCHICAD\\ API\\ DevKit\\ 29.&lt;release build number&gt; ..
cd ..
</pre><p>Don't forget to replace "&lt;release build number&gt;" with the actual build number of the DevKit. Please note the ".." at the end of the commands. It means that CMake will search for the CMakeLists.txt file in the parent folder.</p>
<h3><a class="anchor" id="autotoc_md24"></a>
Build the Add-On</h3>
<p>After you generated the IDE project, open it, and press Build. If everything goes fine, you will see no errors or warnings, and an .apx file (Windows) / .bundle (macOS) is created in your result folder.</p>
<div class="image">
<img src="addon_visual_studio-2.png" alt=""/>
</div>
<h3><a class="anchor" id="autotoc_md25"></a>
Try the Add-On in Archicad</h3>
<p>You have several ways to load the Add-On in Archicad. For development purposes the best if you browse it directly from your build folder, so every modification will appear in Archicad immediately.</p>
<p>1. Open the Add-On Manager Dialog by selecting <b>Options / Add-On Manager</b>.</p>
<div class="image">
<img src="open_addon_manager.png" alt=""/>
</div>
<p>2. Click the <b>Add</b> button under the <b>EDIT LIST OF AVAILABLE ADD-ONS</b> tabpage.</p>
<div class="image">
<img src="addon_manager_add_addon.png" alt=""/>
</div>
<p>3. Browse your Add-On's .apx/.bundle file, and if everything went well your Add-On will appear in the list of Add-Ons.</p>
<div class="image">
<img src="addon_manager_addon_loaded.png" alt=""/>
</div>
<p>4. After closing the Add-On Manager you will see a new command registered by the Add-On: <b>Options / Example AddOn Command</b>.</p>
<p>5. Click on the command, and you will see a very simple dialog created by the Add-On.</p>
<p>Congratulations! You just built your first Archicad Add-On.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
Something doesn't work?</h2>
<p>Sometimes you may meet the error messages below. It means that an error happened during the Add-On loading process. There could be several reasons for this issue, see below.</p>
<div class="image">
<img src="addon_load_failed.png" alt=""/>
</div>
<h3><a class="anchor" id="autotoc_md27"></a>
Invalid Development Kit Version</h3>
<p>Archicad can't load an Add-On if it was created with a different version of the Development Kit. Double check the version of your Archicad and the used Development Kit, they should match.</p>
<h3><a class="anchor" id="autotoc_md28"></a>
Invalid MDID</h3>
<p>Please note, that the example Add-On works only with the DEMO version of Archicad. To release your Add-On you have to register for an MDID (see the details in the Releasing Add-Ons chapter). To work around this issue you can start Archicad in DEMO mode by passing a command line parameter to the executable.</p>
<p>On Windows</p>
<p>Archicad.exe -DEMO</p>
<p>On Mac</p>
<p>"Archicad 29.app/Contents/MacOS/Archicad" -demo</p>
<h2><a class="anchor" id="autotoc_md29"></a>
Anatomy of an Add-On</h2>
<p>You can find several subfolders in the <b>Sources</b> folder.</p>
<h3><a class="anchor" id="autotoc_md30"></a>
Add-On Sources</h3>
<p>The source code for the Add-On is in the <b>AddOn</b> folder.</p>
<p>There are four important entry points for Add-Ons.</p>
<ul>
<li><b>CheckEnvironment:</b> This function is called before any other functions. You can check if your Add-On can or allowed to run in the current environment. You also have to provide the Add-On's name and description. This information will appear in the Add-On Manager.</li>
<li><b>RegisterInterface:</b> This function is responsible to register interface elements in Archicad (like menu commands, tool box items, etc.).</li>
<li><b>Initialize:</b> This function is called when the Add-On is loaded into the memory, before performing any of the Add-On's functions.</li>
<li><b>FreeData:</b> This function is called when the Add-On is unloaded from the memory.</li>
</ul>
<p><a href="http://archicadapi.graphisoft.com/life-of-an-archicad-add-on">You can find a more detailed explanation of these functions here.</a></p>
<div class="fragment"><div class="line"><a class="code hl_enumeration" href="group___add_on_lifetime.html#ga7323a17897372b0fc97fcfe0874213f3">API_AddonType</a> <a class="code hl_function" href="group___add_on_lifetime.html#gaf36d63d09853e5344932b63ee23d2bb9">CheckEnvironment</a> (<a class="code hl_struct" href="struct_a_p_i___envir_params.html">API_EnvirParams</a>* envir)</div>
<div class="line">{</div>
<div class="line">    RSGetIndString (&amp;envir-&gt;<a class="code hl_variable" href="struct_a_p_i___envir_params.html#aee697649a2ea94a9a0ea71a932c88a08">addOnInfo</a>.<a class="code hl_variable" href="struct_a_p_i___add_on_info.html#afd2b35960456793cf413db587606a743">name</a>, ID_ADDON_INFO, 1, <a class="code hl_function" href="group___resource.html#gaf1228260879fd5622cb1e9a5284e0c50">ACAPI_GetOwnResModule</a> ());</div>
<div class="line">    RSGetIndString (&amp;envir-&gt;<a class="code hl_variable" href="struct_a_p_i___envir_params.html#aee697649a2ea94a9a0ea71a932c88a08">addOnInfo</a>.<a class="code hl_variable" href="struct_a_p_i___add_on_info.html#a7dc761071ee3297fbbbf2b893732bfee">description</a>, ID_ADDON_INFO, 2, <a class="code hl_function" href="group___resource.html#gaf1228260879fd5622cb1e9a5284e0c50">ACAPI_GetOwnResModule</a> ());</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="group___add_on_lifetime.html#gga7323a17897372b0fc97fcfe0874213f3a1d41939c287586c8641e2aa5a40b72c7">APIAddon_Normal</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">GSErrCode <a class="code hl_function" href="group___add_on_lifetime.html#ga3d5b6a23422e44dce66728b0f4eb943e">RegisterInterface</a> (<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_function" href="group___menu_item.html#gaec79ce2178f5bb5482da171a49ba88ef">ACAPI_MenuItem_RegisterMenu</a> (ID_ADDON_MENU, 0, <a class="code hl_enumvalue" href="group___add_on_integration.html#ggae7782179a03e5a2f34a4940b46b86623a97e315116aa95528a6497b4633698e86">MenuCode_Tools</a>, MenuFlag_Default);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">GSErrCode <a class="code hl_function" href="group___add_on_lifetime.html#gaa8f1f7d553305c1afe5de7e4dcb66e99">Initialize</a> (<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_function" href="group___menu_item.html#gaf40884810b9a156a9dbded23168dbde8">ACAPI_MenuItem_InstallMenuHandler</a> (ID_ADDON_MENU, MenuCommandHandler);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">GSErrCode <a class="code hl_function" href="group___add_on_lifetime.html#ga04d82e269703a9b433002bbe20f1d3b2">FreeData</a> (<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> NoError;</div>
<div class="line">}</div>
<div class="ttc" id="agroup___add_on_integration_html_ggae7782179a03e5a2f34a4940b46b86623a97e315116aa95528a6497b4633698e86"><div class="ttname"><a href="group___add_on_integration.html#ggae7782179a03e5a2f34a4940b46b86623a97e315116aa95528a6497b4633698e86">MenuCode_Tools</a></div><div class="ttdeci">@ MenuCode_Tools</div><div class="ttdef"><b>Definition</b> APIdefs_Registration.h:305</div></div>
<div class="ttc" id="agroup___add_on_lifetime_html_ga04d82e269703a9b433002bbe20f1d3b2"><div class="ttname"><a href="group___add_on_lifetime.html#ga04d82e269703a9b433002bbe20f1d3b2">FreeData</a></div><div class="ttdeci">GSErrCode FreeData(void)</div></div>
<div class="ttc" id="agroup___add_on_lifetime_html_ga3d5b6a23422e44dce66728b0f4eb943e"><div class="ttname"><a href="group___add_on_lifetime.html#ga3d5b6a23422e44dce66728b0f4eb943e">RegisterInterface</a></div><div class="ttdeci">GSErrCode RegisterInterface(void)</div><div class="ttdoc">In this function the add-on can register its services, and menu commands.</div></div>
<div class="ttc" id="agroup___add_on_lifetime_html_ga7323a17897372b0fc97fcfe0874213f3"><div class="ttname"><a href="group___add_on_lifetime.html#ga7323a17897372b0fc97fcfe0874213f3">API_AddonType</a></div><div class="ttdeci">API_AddonType</div><div class="ttdoc">Describes the different types of add-ons.</div><div class="ttdef"><b>Definition</b> APIdefs_Registration.h:254</div></div>
<div class="ttc" id="agroup___add_on_lifetime_html_gaa8f1f7d553305c1afe5de7e4dcb66e99"><div class="ttname"><a href="group___add_on_lifetime.html#gaa8f1f7d553305c1afe5de7e4dcb66e99">Initialize</a></div><div class="ttdeci">GSErrCode Initialize(void)</div><div class="ttdoc">The main entry point of the add-on.</div></div>
<div class="ttc" id="agroup___add_on_lifetime_html_gaf36d63d09853e5344932b63ee23d2bb9"><div class="ttname"><a href="group___add_on_lifetime.html#gaf36d63d09853e5344932b63ee23d2bb9">CheckEnvironment</a></div><div class="ttdeci">API_AddonType CheckEnvironment(API_EnvirParams *envirParams)</div><div class="ttdoc">Defines the behavior of the add-on based on the current running environment.</div></div>
<div class="ttc" id="agroup___add_on_lifetime_html_gga7323a17897372b0fc97fcfe0874213f3a1d41939c287586c8641e2aa5a40b72c7"><div class="ttname"><a href="group___add_on_lifetime.html#gga7323a17897372b0fc97fcfe0874213f3a1d41939c287586c8641e2aa5a40b72c7">APIAddon_Normal</a></div><div class="ttdeci">@ APIAddon_Normal</div><div class="ttdef"><b>Definition</b> APIdefs_Registration.h:262</div></div>
<div class="ttc" id="agroup___menu_item_html_gaec79ce2178f5bb5482da171a49ba88ef"><div class="ttname"><a href="group___menu_item.html#gaec79ce2178f5bb5482da171a49ba88ef">ACAPI_MenuItem_RegisterMenu</a></div><div class="ttdeci">GSErrCode ACAPI_MenuItem_RegisterMenu(short menuStrResID, short promptStrResID, APIMenuCodeID menuPosCode, GSFlags menuFlags)</div><div class="ttdoc">Registers the menu items of the add-on.</div></div>
<div class="ttc" id="agroup___menu_item_html_gaf40884810b9a156a9dbded23168dbde8"><div class="ttname"><a href="group___menu_item.html#gaf40884810b9a156a9dbded23168dbde8">ACAPI_MenuItem_InstallMenuHandler</a></div><div class="ttdeci">GSErrCode ACAPI_MenuItem_InstallMenuHandler(short menuStrResID, APIMenuCommandProc *handlerProc)</div><div class="ttdoc">Installs a callback procedure for handling the add-on's menu commands.</div></div>
<div class="ttc" id="agroup___resource_html_gaf1228260879fd5622cb1e9a5284e0c50"><div class="ttname"><a href="group___resource.html#gaf1228260879fd5622cb1e9a5284e0c50">ACAPI_GetOwnResModule</a></div><div class="ttdeci">GSResModule ACAPI_GetOwnResModule(void)</div><div class="ttdoc">Returns the add-on's own resource module identifier for loading resources.</div></div>
<div class="ttc" id="astruct_a_p_i___add_on_info_html_a7dc761071ee3297fbbbf2b893732bfee"><div class="ttname"><a href="struct_a_p_i___add_on_info.html#a7dc761071ee3297fbbbf2b893732bfee">API_AddOnInfo::description</a></div><div class="ttdeci">GS::UniString description</div><div class="ttdoc">The description of the functionality of the add-on, in Unicode.</div><div class="ttdef"><b>Definition</b> APIdefs_Registration.h:119</div></div>
<div class="ttc" id="astruct_a_p_i___add_on_info_html_afd2b35960456793cf413db587606a743"><div class="ttname"><a href="struct_a_p_i___add_on_info.html#afd2b35960456793cf413db587606a743">API_AddOnInfo::name</a></div><div class="ttdeci">GS::UniString name</div><div class="ttdoc">The name of the add-on, in Unicode.</div><div class="ttdef"><b>Definition</b> APIdefs_Registration.h:113</div></div>
<div class="ttc" id="astruct_a_p_i___envir_params_html"><div class="ttname"><a href="struct_a_p_i___envir_params.html">API_EnvirParams</a></div><div class="ttdoc">Describes the different parameters of the running environment.</div><div class="ttdef"><b>Definition</b> APIdefs_Registration.h:197</div></div>
<div class="ttc" id="astruct_a_p_i___envir_params_html_aee697649a2ea94a9a0ea71a932c88a08"><div class="ttname"><a href="struct_a_p_i___envir_params.html#aee697649a2ea94a9a0ea71a932c88a08">API_EnvirParams::addOnInfo</a></div><div class="ttdeci">API_AddOnInfo addOnInfo</div><div class="ttdoc">Textual description of the add-on; the add-on should fill this in.</div><div class="ttdef"><b>Definition</b> APIdefs_Registration.h:209</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md31"></a>
Add-On Resources</h3>
<p>The source code for resources is in the <b>AddOnResources</b> folder.</p>
<ul>
<li><b>RFIX:</b> Fix, non-localized resources, like images.</li>
<li><b>RFIX.mac, RFIX.win:</b> Platform dependent utility codes.</li>
<li><b>RINT:</b> Resources to be localized.</li>
<li><b>Tools:</b> Resource builder tool.</li>
</ul>
<p>Archicad Add-Ons can work on both Windows and macOS platforms, so you can't use native resource files for localized strings and dialogs. This is why we invented the .grc format, which is a platform independent resource description format working on both platforms. It means that you have to define your resources only once, and then the code will work on both platforms without any modifications.</p>
<h2><a class="anchor" id="autotoc_md32"></a>
Debugging</h2>
<p>Debugging is pretty straightforward. You just have to attach your debugger to the running Archicad process, and then you can debug your Add-On like any other applications. To make the process more smooth, you can set Archicad as the executable for the Add-On project, and just hit debug to start Archicad.</p>
<h3><a class="anchor" id="autotoc_md33"></a>
Visual Studio Tips</h3>
<p>Make sure that when you attach to the Archicad process, "Native code" is selected in the "Attach to" item in the dialog. Also note, that the breakpoints doesn't seem to be active until your Add-On is loaded into the memory. Just place your breakpoints, call one of the Add-On's functionalities, and it should work.</p>
<h2><a class="anchor" id="autotoc_md34"></a>
Call an API Function</h2>
<p>Let's write an example Add-On that counts the number of walls in the current plan.</p>
<p>First of all, you have to include a new header file, because some of it's functionalities will be needed. </p><pre class="fragment">#include "StringConversion.hpp"
</pre><p>As you see in the example Add-On you can register a menu command, and then handle it like in the example below. When the user clicks on the command, the code will call the <code>CountNumberOfWalls</code> function to do the job for us.</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> GSErrCode MenuCommandHandler (<span class="keyword">const</span> <a class="code hl_struct" href="struct_a_p_i___menu_params.html">API_MenuParams</a> *menuParams)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span> (menuParams-&gt;<a class="code hl_variable" href="struct_a_p_i___menu_params.html#a74bab3a69139c1ff046f8e6957126103">menuItemRef</a>.<a class="code hl_variable" href="struct_a_p_i___menu_item_ref.html#aef080cac7ebdcbc88b22c62839728d21">menuResID</a>) {</div>
<div class="line">        <span class="keywordflow">case</span> ID_ADDON_MENU:</div>
<div class="line">            <span class="keywordflow">switch</span> (menuParams-&gt;<a class="code hl_variable" href="struct_a_p_i___menu_params.html#a74bab3a69139c1ff046f8e6957126103">menuItemRef</a>.<a class="code hl_variable" href="struct_a_p_i___menu_item_ref.html#afe147f8c06bca2aa3c143d314b5ee962">itemIndex</a>) {</div>
<div class="line">                <span class="keywordflow">case</span> 1:</div>
<div class="line">                    CountNumberOfWalls ();</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> NoError;</div>
<div class="line">}</div>
<div class="ttc" id="astruct_a_p_i___menu_item_ref_html_aef080cac7ebdcbc88b22c62839728d21"><div class="ttname"><a href="struct_a_p_i___menu_item_ref.html#aef080cac7ebdcbc88b22c62839728d21">API_MenuItemRef::menuResID</a></div><div class="ttdeci">short menuResID</div><div class="ttdoc">The resource ID which the tool command belongs to.</div><div class="ttdef"><b>Definition</b> APIdefs_Interface.h:129</div></div>
<div class="ttc" id="astruct_a_p_i___menu_item_ref_html_afe147f8c06bca2aa3c143d314b5ee962"><div class="ttname"><a href="struct_a_p_i___menu_item_ref.html#afe147f8c06bca2aa3c143d314b5ee962">API_MenuItemRef::itemIndex</a></div><div class="ttdeci">Int32 itemIndex</div><div class="ttdoc">The index of the command within the specified menu.</div><div class="ttdef"><b>Definition</b> APIdefs_Interface.h:141</div></div>
<div class="ttc" id="astruct_a_p_i___menu_params_html"><div class="ttname"><a href="struct_a_p_i___menu_params.html">API_MenuParams</a></div><div class="ttdoc">Describes the menu item that was chosen.</div><div class="ttdef"><b>Definition</b> APIdefs_Callback.h:54</div></div>
<div class="ttc" id="astruct_a_p_i___menu_params_html_a74bab3a69139c1ff046f8e6957126103"><div class="ttname"><a href="struct_a_p_i___menu_params.html#a74bab3a69139c1ff046f8e6957126103">API_MenuParams::menuItemRef</a></div><div class="ttdeci">API_MenuItemRef menuItemRef</div><div class="ttdoc">The menu item chosen by the user. The menuItemRef.menuResID is the same what you called ACAPI_MenuIte...</div><div class="ttdef"><b>Definition</b> APIdefs_Callback.h:60</div></div>
</div><!-- fragment --><p>The <code>CountNumberOfWalls</code> function can be implemented like in the example below.</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> CountNumberOfWalls ()</div>
<div class="line">{</div>
<div class="line">    GS::Array&lt;API_Guid&gt; wallGuids;</div>
<div class="line">    GSErrCode err = <a class="code hl_function" href="group___element.html#ga1e5c492e5419647568f209003ab0571b">ACAPI_Element_GetElemList</a> (<a class="code hl_enumvalue" href="group___element.html#gga2502601bf26ffc7abc608f6988da4d91a97df09286f89e43fadeb4c6abbc09bc3">API_WallID</a>, &amp;wallGuids);</div>
<div class="line">    <span class="keywordflow">if</span> (err != NoError) {</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    USize wallCount = wallGuids.GetSize ();</div>
<div class="line">    DG::InformationAlert (GS::ValueToUniString (wallCount), <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;OK&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="agroup___element_html_ga1e5c492e5419647568f209003ab0571b"><div class="ttname"><a href="group___element.html#ga1e5c492e5419647568f209003ab0571b">ACAPI_Element_GetElemList</a></div><div class="ttdeci">GSErrCode ACAPI_Element_GetElemList(const API_ElemType &amp;type, GS::Array&lt; API_Guid &gt; *elemList, API_ElemFilterFlags filterBits=APIFilt_None, const API_Guid &amp;renovationFilterGuid=APINULLGuid)</div><div class="ttdoc">Returns an array of guids of the elements of the given type.</div></div>
<div class="ttc" id="agroup___element_html_gga2502601bf26ffc7abc608f6988da4d91a97df09286f89e43fadeb4c6abbc09bc3"><div class="ttname"><a href="group___element.html#gga2502601bf26ffc7abc608f6988da4d91a97df09286f89e43fadeb4c6abbc09bc3">API_WallID</a></div><div class="ttdeci">@ API_WallID</div><div class="ttdef"><b>Definition</b> APIdefs_Elements.h:78</div></div>
</div><!-- fragment --><p>It accesses the list of walls from the current plan, and shows the length of the array in a dialog.</p>
<p>If everything is OK, you should see something like this:</p>
<div class="image">
<img src="number_of_walls_addon.png" alt=""/>
</div>
<h2><a class="anchor" id="autotoc_md35"></a>
Releasing Add-Ons</h2>
<p>To release your Add-On and make it work with all Archicad versions, you have to <a href="http://archicadapi.graphisoft.com/">register as an Archicad developer</a>, and get an MDID for your Add-On. MDID is a unique identifier which identifies the Add-On. Please note that Archicad can't load two different Add-Ons with the same MDID, so you have to set up different MDIDs for each of your Add-Ons.</p>
<p><a href="http://archicadapi.graphisoft.com/how-to-get-mdid-for-my-add-on">Here you can find detailed instructions on registering an MDID.</a></p>
<h2><a class="anchor" id="autotoc_md36"></a>
Resources</h2>
<p>This tutorial covered only the basics, but there are much more.</p>
<ul>
<li>Find out the details from <a class="el" href="_dev_kit.html">Archicad API Reference</a>.</li>
<li>If you are feeling stuck, you can ask your questions in our <a href="https://community.graphisoft.com/t5/Developer-forum/bd-p/forum_develop">Developer Forum</a>.</li>
<li>For some more tutorials check the <a href="http://archicadapi.graphisoft.com/blog">Add-On Developer Blog</a>. </li>
</ul>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
</div><!-- doc-content -->
</body>
</html>
