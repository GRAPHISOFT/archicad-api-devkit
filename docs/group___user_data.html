<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Archicad C++ API" />
<meta property="og:image" content="logo.svg" />
<meta property="og:description" content="Archicad Development Kit Documentation, best practices, example codes and information hub." />
<meta property="og:url" content="https://archicadapi.graphisoft.com/documentation/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="logo.svg" />
<meta name="twitter:title" content="Archicad C++ API" />
<meta name="twitter:description" content="Archicad Development Kit Documentation, best practices, example codes and information hub." />
<!-- END twitter metadata -->
<title>Archicad 28 C++ API: Custom User Data</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="https://fonts.cdnfonts.com/css/proxima-nova-2" rel="stylesheet">
<link rel="icon" href="logo.svg" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Archicad 28 C++ API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group___user_data.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Custom User Data</div></div>
</div><!--header-->
<div class="contents">

<p>Functions for creating, handling and deleting custom (Add-On specific) User Data attached to specific elements or element groups.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae9b0218b3cec7307ba01ee742ec08499"><td class="memItemLeft" align="right" valign="top">GSErrCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___user_data.html#gae9b0218b3cec7307ba01ee742ec08499">ACAPI_UserData_GetUserData</a> (<a class="el" href="struct_a_p_i___attr___head.html">API_Attr_Head</a> *attrHead, <a class="el" href="group___attribute.html#gaa9cfb11d312c694bd8c4df24afd00be6">API_AttributeUserData</a> *userData)</td></tr>
<tr class="memdesc:gae9b0218b3cec7307ba01ee742ec08499"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains the user data attached to an attribute.  <br /></td></tr>
<tr class="separator:gae9b0218b3cec7307ba01ee742ec08499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga92c2158188147f3bb6c5f56cdc1b7282"><td class="memItemLeft" align="right" valign="top">GSErrCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___user_data.html#ga92c2158188147f3bb6c5f56cdc1b7282">ACAPI_UserData_SetUserData</a> (<a class="el" href="struct_a_p_i___attr___head.html">API_Attr_Head</a> *attrHead, const <a class="el" href="group___attribute.html#gaa9cfb11d312c694bd8c4df24afd00be6">API_AttributeUserData</a> *userData)</td></tr>
<tr class="memdesc:ga92c2158188147f3bb6c5f56cdc1b7282"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attaches user data to an attribute, or deletes the attached data.  <br /></td></tr>
<tr class="separator:ga92c2158188147f3bb6c5f56cdc1b7282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga992d096582e015768651632d6e86ff43"><td class="memItemLeft" align="right" valign="top">GSErrCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___element.html#ga992d096582e015768651632d6e86ff43">ACAPI_Element_GetUserData</a> (<a class="el" href="struct_a_p_i___elem___head.html">API_Elem_Head</a> *elemHead, <a class="el" href="group___element.html#ga624e5ee0f556358e85a4c0c26ffdc412">API_ElementUserData</a> *userData, UInt32 mask=0)</td></tr>
<tr class="memdesc:ga992d096582e015768651632d6e86ff43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains the user data attached to an element or an element default.  <br /></td></tr>
<tr class="separator:ga992d096582e015768651632d6e86ff43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga630457b205e585ee6c4d45dc6a98c579"><td class="memItemLeft" align="right" valign="top">GSErrCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___element.html#ga630457b205e585ee6c4d45dc6a98c579">ACAPI_Element_SetUserData</a> (<a class="el" href="struct_a_p_i___elem___head.html">API_Elem_Head</a> *elemHead, const <a class="el" href="group___element.html#ga624e5ee0f556358e85a4c0c26ffdc412">API_ElementUserData</a> *userData)</td></tr>
<tr class="memdesc:ga630457b205e585ee6c4d45dc6a98c579"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attaches the user data to an element or an element default.  <br /></td></tr>
<tr class="separator:ga630457b205e585ee6c4d45dc6a98c579"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga54eae84c9e9efaf0a18caaebe48df016"><td class="memItemLeft" align="right" valign="top">GSErrCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___user_data.html#ga54eae84c9e9efaf0a18caaebe48df016">ACAPI_UserData_DeleteUserData</a> (<a class="el" href="struct_a_p_i___elem___head.html">API_Elem_Head</a> *elemHead)</td></tr>
<tr class="memdesc:ga54eae84c9e9efaf0a18caaebe48df016"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the user data attached to the specified element.  <br /></td></tr>
<tr class="separator:ga54eae84c9e9efaf0a18caaebe48df016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad146c33ef9d7502a0023a02d21be1e15"><td class="memItemLeft" align="right" valign="top">GSErrCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___grouping.html#gad146c33ef9d7502a0023a02d21be1e15">ACAPI_Grouping_GetUserData</a> (const <a class="el" href="struct_a_p_i___guid.html">API_Guid</a> &amp;groupGuid, <a class="el" href="struct_a_p_i___user_data.html">API_UserData</a> *userData)</td></tr>
<tr class="memdesc:gad146c33ef9d7502a0023a02d21be1e15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains the user data attached to an element group.  <br /></td></tr>
<tr class="separator:gad146c33ef9d7502a0023a02d21be1e15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae19fc9361d0162de9fbc225b41051117"><td class="memItemLeft" align="right" valign="top">GSErrCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___grouping.html#gae19fc9361d0162de9fbc225b41051117">ACAPI_Grouping_SetUserData</a> (const <a class="el" href="struct_a_p_i___guid.html">API_Guid</a> &amp;groupGuid, const <a class="el" href="struct_a_p_i___user_data.html">API_UserData</a> *userData)</td></tr>
<tr class="memdesc:gae19fc9361d0162de9fbc225b41051117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attaches the user data to the element group.  <br /></td></tr>
<tr class="separator:gae19fc9361d0162de9fbc225b41051117"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions for creating, handling and deleting custom (Add-On specific) User Data attached to specific elements or element groups. </p>
<h1><a class="anchor" id="autotoc_md168"></a>
Save data into the Element records</h1>
<p>This paper give hints on:</p>
<ul>
<li>how you can assign additional information to, or</li>
<li>with other words how you can save own data into</li>
</ul>
<p>any elements placed onto the floor plan.</p>
<h1><a class="anchor" id="autotoc_md169"></a>
Limitations</h1>
<p>All Archicad elements can hold extra information (the previous 128-byte limit has been removed in Archicad 8). The registration table is global for the whole project; add-ons are identified by their module ID. It means that one add-on can save the same number of bytes to any kind of element.</p>
<h1><a class="anchor" id="autotoc_md170"></a>
Requirements</h1>
<p>The structure of the user data is unified for Archicad 8, and it contains the following required fields:</p>
<ul>
<li>The version number of the data &ndash; this enforces future compatibility.</li>
<li>The platform where the data was stored.</li>
<li>And, of course, the data itself, which can contain an arbitrary number of bytes.</li>
</ul>
<h1><a class="anchor" id="autotoc_md171"></a>
Data Structure</h1>
<p>The registration table is saved into the project file. Archicad never deletes any registration data. This ensures that your custom data will be preserved, even if your add-on is not installed. It can happen if the user moves a project onto another Archicad installation. If you pass a nullptr handle in the appropriate part of the user data, the custom data will be erased.</p>
<p>The registration itself does not ensure that the data structure of every database element will be extended automatically by the requested number of bytes. These extra bytes are allocated on your request only.</p>
<p>To add your extra bytes to a given element, you should call the <a class="el" href="group___element.html#ga630457b205e585ee6c4d45dc6a98c579">ACAPI_Element_SetUserData</a> function, and you can get your data assigned to any element with the <a class="el" href="group___element.html#ga992d096582e015768651632d6e86ff43">ACAPI_Element_GetUserData</a> function. On the parameter list you have to pass an <a class="el" href="group___element.html#ga624e5ee0f556358e85a4c0c26ffdc412">API_ElementUserData</a> structure to store the requested data. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga992d096582e015768651632d6e86ff43" name="ga992d096582e015768651632d6e86ff43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga992d096582e015768651632d6e86ff43">&#9670;&#160;</a></span>ACAPI_Element_GetUserData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GSErrCode ACAPI_Element_GetUserData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_a_p_i___elem___head.html">API_Elem_Head</a> *&#160;</td>
          <td class="paramname"><em>elemHead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___element.html#ga624e5ee0f556358e85a4c0c26ffdc412">API_ElementUserData</a> *&#160;</td>
          <td class="paramname"><em>userData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UInt32&#160;</td>
          <td class="paramname"><em>mask</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains the user data attached to an element or an element default. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elemHead</td><td>[in] Identifies the element or element default (only fields type and guid are used). </td></tr>
    <tr><td class="paramname">userData</td><td>[in/out] Pointer to the user data. </td></tr>
    <tr><td class="paramname">mask</td><td>[in] Optional mask. Currently valid values are 0 and <code>APIElemMask_FloorPlan</code>. In the latter case, the elements in the floor plan database are counted directly, without changing the database first. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>NoError - The function has completed with success.</li>
<li>APIERR_BADPARS - The passed parameter is nullptr; userData</li>
<li>APIERR_BADID - The elemHead is incorrect.</li>
<li>APIERR_NOUSERDATA - No user data attached with the gived signature </li>
</ul>
</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>This function is used to get the user attached data from an element or from an element default. To obtain data from element default only elemHead-&gt;type is necessary and elemHead-&gt;guid should be APINULLGuid. To obtain data from an element only elemHead-&gt;guid is necessary and it should be set to element's guid. Use the <a class="el" href="group___element.html#ga630457b205e585ee6c4d45dc6a98c579">ACAPI_Element_SetUserData</a> functions to push data into the element record. You can read more about this topic at the Save data into Element records paper. </dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="comment">//------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// Obtain user data from wall default element</span></div>
<div class="line"><span class="comment">//------------------------------------------------------------</span></div>
<div class="line">GSErrCode GetUserDataFromWallDefaultElem (CustomData data)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="struct_a_p_i___elem___head.html">API_Elem_Head</a> wallDefault = {};</div>
<div class="line">    wallDefault.<a class="code hl_variable" href="struct_a_p_i___elem___head.html#ae52dd2364341333896cae3f4ebfd2f52">type</a> = API_WallID;</div>
<div class="line">    <a class="code hl_struct" href="struct_a_p_i___user_data.html">API_ElementUserData</a> userData = {};</div>
<div class="line">    GSErrCode err = <a class="code hl_function" href="group___element.html#ga992d096582e015768651632d6e86ff43">ACAPI_Element_GetUserData</a> (&amp;wallDefault, &amp;userData);</div>
<div class="line">    <span class="keywordflow">if</span> (err == NoError &amp;&amp; userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a2d8ebde016598bed77025a0f2adbd50c">dataHdl</a> != <span class="keyword">nullptr</span> &amp;&amp; userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a8dba21102f8ac0edd7f1992b0f98c264">platformSign</a> == GS::Act_Platform_Sign)</div>
<div class="line">        data = *<span class="keyword">reinterpret_cast&lt;</span>CustomData*<span class="keyword">&gt;</span>(*userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a2d8ebde016598bed77025a0f2adbd50c">dataHdl</a>);</div>
<div class="line">    BMKillHandle (&amp;userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a2d8ebde016598bed77025a0f2adbd50c">dataHdl</a>);</div>
<div class="line">    <span class="keywordflow">return</span> NoError;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// Obtain user data from an element identified by guid</span></div>
<div class="line"><span class="comment">//------------------------------------------------------------</span></div>
<div class="line">GSErrCode GetUserDataFromElem (<span class="keyword">const</span> <a class="code hl_struct" href="struct_a_p_i___guid.html">API_Guid</a> selectedElemGuid, CustomData data)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="struct_a_p_i___elem___head.html">API_Elem_Head</a> element = {};</div>
<div class="line">    element.<a class="code hl_variable" href="struct_a_p_i___elem___head.html#aa3cef1d08910014c1546b66c0bf9c05a">guid</a> = selectedElemGuid;</div>
<div class="line">    <a class="code hl_struct" href="struct_a_p_i___user_data.html">API_ElementUserData</a> userData = {};</div>
<div class="line">    GSErrCode err = <a class="code hl_function" href="group___element.html#ga992d096582e015768651632d6e86ff43">ACAPI_Element_GetUserData</a> (&amp;element, &amp;userData);</div>
<div class="line">    <span class="keywordflow">if</span> (err == NoError &amp;&amp; userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a2d8ebde016598bed77025a0f2adbd50c">dataHdl</a> != <span class="keyword">nullptr</span> &amp;&amp; userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a8dba21102f8ac0edd7f1992b0f98c264">platformSign</a> == GS::Act_Platform_Sign)</div>
<div class="line">        data = *<span class="keyword">reinterpret_cast&lt;</span>CustomData*<span class="keyword">&gt;</span>(*userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a2d8ebde016598bed77025a0f2adbd50c">dataHdl</a>);</div>
<div class="line">    BMKillHandle (&amp;userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a2d8ebde016598bed77025a0f2adbd50c">dataHdl</a>);</div>
<div class="line">    <span class="keywordflow">return</span> NoError;</div>
<div class="line">}</div>
<div class="ttc" id="agroup___element_html_ga992d096582e015768651632d6e86ff43"><div class="ttname"><a href="group___element.html#ga992d096582e015768651632d6e86ff43">ACAPI_Element_GetUserData</a></div><div class="ttdeci">GSErrCode ACAPI_Element_GetUserData(API_Elem_Head *elemHead, API_ElementUserData *userData, UInt32 mask=0)</div><div class="ttdoc">Obtains the user data attached to an element or an element default.</div></div>
<div class="ttc" id="astruct_a_p_i___elem___head_html"><div class="ttname"><a href="struct_a_p_i___elem___head.html">API_Elem_Head</a></div><div class="ttdoc">General element header for element types.</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:401</div></div>
<div class="ttc" id="astruct_a_p_i___elem___head_html_aa3cef1d08910014c1546b66c0bf9c05a"><div class="ttname"><a href="struct_a_p_i___elem___head.html#aa3cef1d08910014c1546b66c0bf9c05a">API_Elem_Head::guid</a></div><div class="ttdeci">API_Guid guid</div><div class="ttdoc">The globally unique identifier of the element. It is type-independent, and guaranteed to be globally ...</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:426</div></div>
<div class="ttc" id="astruct_a_p_i___elem___head_html_ae52dd2364341333896cae3f4ebfd2f52"><div class="ttname"><a href="struct_a_p_i___elem___head.html#ae52dd2364341333896cae3f4ebfd2f52">API_Elem_Head::type</a></div><div class="ttdeci">API_ElemType type</div><div class="ttdoc">The type of the element.</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:407</div></div>
<div class="ttc" id="astruct_a_p_i___guid_html"><div class="ttname"><a href="struct_a_p_i___guid.html">API_Guid</a></div><div class="ttdoc">Represents a GS::Guid in the API layer.</div><div class="ttdef"><b>Definition:</b> API_Guid.hpp:46</div></div>
<div class="ttc" id="astruct_a_p_i___user_data_html"><div class="ttname"><a href="struct_a_p_i___user_data.html">API_UserData</a></div><div class="ttdoc">Custom data record attached to element sets.</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:18359</div></div>
<div class="ttc" id="astruct_a_p_i___user_data_html_a2d8ebde016598bed77025a0f2adbd50c"><div class="ttname"><a href="struct_a_p_i___user_data.html#a2d8ebde016598bed77025a0f2adbd50c">API_UserData::dataHdl</a></div><div class="ttdeci">GSHandle dataHdl</div><div class="ttdoc">handle containing the user data (arbitrary size)</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:18392</div></div>
<div class="ttc" id="astruct_a_p_i___user_data_html_a8dba21102f8ac0edd7f1992b0f98c264"><div class="ttname"><a href="struct_a_p_i___user_data.html#a8dba21102f8ac0edd7f1992b0f98c264">API_UserData::platformSign</a></div><div class="ttdeci">unsigned short platformSign</div><div class="ttdoc">the platform the data was created on; defines the byte ordering (can be GS::Win_Platform_Sign,...</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:18371</div></div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="ga630457b205e585ee6c4d45dc6a98c579" name="ga630457b205e585ee6c4d45dc6a98c579"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga630457b205e585ee6c4d45dc6a98c579">&#9670;&#160;</a></span>ACAPI_Element_SetUserData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GSErrCode ACAPI_Element_SetUserData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_a_p_i___elem___head.html">API_Elem_Head</a> *&#160;</td>
          <td class="paramname"><em>elemHead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group___element.html#ga624e5ee0f556358e85a4c0c26ffdc412">API_ElementUserData</a> *&#160;</td>
          <td class="paramname"><em>userData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attaches the user data to an element or an element default. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elemHead</td><td>[in] Header of the element (only fields type and guid are used). </td></tr>
    <tr><td class="paramname">userData</td><td>[in] Pointer to the new user data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>NoError - The function has completed with success.</li>
<li>APIERR_BADPARS - Any of the passed parameters is nullptr</li>
<li>APIERR_BADPLATFORMSIGN - The given platform sign is invalid (out of range)</li>
<li>APIERR_MEMFULL - Out of memory </li>
</ul>
</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>This function is used to push the user attached data into an element default or into an element. To set data to element default only <code>elemHead-&gt;type</code> is necessary and <code>elemHead-&gt;guid</code> should be <code>APINULLGuid</code>. To set data to an element only elemHead-&gt;guid is necessary and it should be set to element's guid. Use the <a class="el" href="group___element.html#ga992d096582e015768651632d6e86ff43">ACAPI_Element_GetUserData</a> function to get data from the element record. Note that this function is not undoable in case of element default setting. The caller should allocate and deallocate the userData-&gt;dataHdl handle. </dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="comment">//------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// Set user data to wall default element</span></div>
<div class="line"><span class="comment">//------------------------------------------------------------</span></div>
<div class="line"> </div>
<div class="line">GSErrCode SetUserDataToWallDefaultElem (<span class="keyword">const</span> CustomData&amp; data)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="struct_a_p_i___elem___head.html">API_Elem_Head</a> wallDefault = {};</div>
<div class="line">    wallDefault.<a class="code hl_variable" href="struct_a_p_i___elem___head.html#ae52dd2364341333896cae3f4ebfd2f52">type</a> = API_WallID;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="struct_a_p_i___user_data.html">API_ElementUserData</a> userData = {};</div>
<div class="line">    userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a62da06084b806e9d4c0e5bef652bce84">dataVersion</a> = 1;</div>
<div class="line">    userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a8dba21102f8ac0edd7f1992b0f98c264">platformSign</a> = GS::Act_Platform_Sign;</div>
<div class="line">    userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#ae2dafdb8383242e069de9335002d5b61">flags</a> = APIUserDataFlag_FillWith | APIUserDataFlag_Pickup;</div>
<div class="line">    userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a2d8ebde016598bed77025a0f2adbd50c">dataHdl</a> = BMAllocateHandle (<span class="keyword">sizeof</span> (data), ALLOCATE_CLEAR, 0);</div>
<div class="line"> </div>
<div class="line">    *<span class="keyword">reinterpret_cast&lt;</span>CustomData*<span class="keyword">&gt;</span> (*userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a2d8ebde016598bed77025a0f2adbd50c">dataHdl</a>) = data;</div>
<div class="line">    GSErrCode err = <a class="code hl_function" href="group___element.html#ga630457b205e585ee6c4d45dc6a98c579">ACAPI_Element_SetUserData</a> (&amp;wallDefault, &amp;userData);</div>
<div class="line"> </div>
<div class="line">    BMKillHandle (&amp;userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a2d8ebde016598bed77025a0f2adbd50c">dataHdl</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> err;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// Set user data to an element identified by guid</span></div>
<div class="line"><span class="comment">//------------------------------------------------------------</span></div>
<div class="line"> </div>
<div class="line">GSErrCode SetUserDataToElem (<span class="keyword">const</span> <a class="code hl_struct" href="struct_a_p_i___guid.html">API_Guid</a>&amp; selectedElemGuid, <span class="keyword">const</span> CustomData&amp; data)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="struct_a_p_i___elem___head.html">API_Elem_Head</a> element = {};</div>
<div class="line">    element.<a class="code hl_variable" href="struct_a_p_i___elem___head.html#aa3cef1d08910014c1546b66c0bf9c05a">guid</a> = selectedElemGuid;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="struct_a_p_i___user_data.html">API_ElementUserData</a> userData = {};</div>
<div class="line">    userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a62da06084b806e9d4c0e5bef652bce84">dataVersion</a> = 1;</div>
<div class="line">    userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a8dba21102f8ac0edd7f1992b0f98c264">platformSign</a> = GS::Act_Platform_Sign;</div>
<div class="line">    userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#ae2dafdb8383242e069de9335002d5b61">flags</a> = APIUserDataFlag_FillWith | APIUserDataFlag_Pickup;</div>
<div class="line">    userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a2d8ebde016598bed77025a0f2adbd50c">dataHdl</a> = BMAllocateHandle (<span class="keyword">sizeof</span> (data), ALLOCATE_CLEAR, 0);</div>
<div class="line"> </div>
<div class="line">    *<span class="keyword">reinterpret_cast&lt;</span>CustomData*<span class="keyword">&gt;</span> (*userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a2d8ebde016598bed77025a0f2adbd50c">dataHdl</a>) = data;</div>
<div class="line"> </div>
<div class="line">    GSErrCode err = <a class="code hl_function" href="group___command.html#gab7bf9e1351986b4bb6c69dab76766f1a">ACAPI_CallUndoableCommand</a> (<span class="stringliteral">&quot;Set user data to an elem&quot;</span>,</div>
<div class="line">        [&amp;userData, &amp;element] () -&gt; GSErrCode {</div>
<div class="line">            <span class="keywordflow">return</span> <a class="code hl_function" href="group___element.html#ga630457b205e585ee6c4d45dc6a98c579">ACAPI_Element_SetUserData</a> (&amp;element, &amp;userData);</div>
<div class="line">        }</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    BMKillHandle (&amp;userData.<a class="code hl_variable" href="struct_a_p_i___user_data.html#a2d8ebde016598bed77025a0f2adbd50c">dataHdl</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> err;</div>
<div class="line">}</div>
<div class="ttc" id="agroup___command_html_gab7bf9e1351986b4bb6c69dab76766f1a"><div class="ttname"><a href="group___command.html#gab7bf9e1351986b4bb6c69dab76766f1a">ACAPI_CallUndoableCommand</a></div><div class="ttdeci">GSErrCode ACAPI_CallUndoableCommand(const GS::UniString &amp;undoString, const std::function&lt; GSErrCode()&gt; &amp;command)</div><div class="ttdoc">Performs an undoable operation.</div></div>
<div class="ttc" id="agroup___element_html_ga630457b205e585ee6c4d45dc6a98c579"><div class="ttname"><a href="group___element.html#ga630457b205e585ee6c4d45dc6a98c579">ACAPI_Element_SetUserData</a></div><div class="ttdeci">GSErrCode ACAPI_Element_SetUserData(API_Elem_Head *elemHead, const API_ElementUserData *userData)</div><div class="ttdoc">Attaches the user data to an element or an element default.</div></div>
<div class="ttc" id="astruct_a_p_i___user_data_html_a62da06084b806e9d4c0e5bef652bce84"><div class="ttname"><a href="struct_a_p_i___user_data.html#a62da06084b806e9d4c0e5bef652bce84">API_UserData::dataVersion</a></div><div class="ttdeci">short dataVersion</div><div class="ttdoc">the version of the user data</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:18365</div></div>
<div class="ttc" id="astruct_a_p_i___user_data_html_ae2dafdb8383242e069de9335002d5b61"><div class="ttname"><a href="struct_a_p_i___user_data.html#ae2dafdb8383242e069de9335002d5b61">API_UserData::flags</a></div><div class="ttdeci">GSFlags flags</div><div class="ttdoc">Special flags | APIUserDataFlag_Pickup | copy userdata into default at element parameter transfer | |...</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:18380</div></div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="gad146c33ef9d7502a0023a02d21be1e15" name="gad146c33ef9d7502a0023a02d21be1e15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad146c33ef9d7502a0023a02d21be1e15">&#9670;&#160;</a></span>ACAPI_Grouping_GetUserData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GSErrCode ACAPI_Grouping_GetUserData </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_a_p_i___guid.html">API_Guid</a> &amp;&#160;</td>
          <td class="paramname"><em>groupGuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_a_p_i___user_data.html">API_UserData</a> *&#160;</td>
          <td class="paramname"><em>userData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains the user data attached to an element group. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">groupGuid</td><td>[in] Unique ID of the element group. </td></tr>
    <tr><td class="paramname">userData</td><td>[in/out] Pointer to the new user data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>NoError - The function has completed with success, a new user data has attached to the element group.</li>
<li>APIERR_NEEDSUNDOSCOPE - The function must be undoable, it wasn't called from an undoable command scope.</li>
<li>APIERR_BADID - Passed groupGuid ID is invalid.</li>
<li>APIERR_BADPARS - One or more passed parameters are nullptr.</li>
<li>APIERR_NOUSERDATA - No user data attached with the gived signature.</li>
<li>APIERR_MEMFULL - Out of memory. </li>
</ul>
</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>This function is used to get the user attached data from an element group. Use the <a class="el" href="group___grouping.html#gae19fc9361d0162de9fbc225b41051117">ACAPI_Grouping_SetUserData</a> functions to push data into the element group. </dd></dl>

</div>
</div>
<a id="gae19fc9361d0162de9fbc225b41051117" name="gae19fc9361d0162de9fbc225b41051117"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae19fc9361d0162de9fbc225b41051117">&#9670;&#160;</a></span>ACAPI_Grouping_SetUserData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GSErrCode ACAPI_Grouping_SetUserData </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_a_p_i___guid.html">API_Guid</a> &amp;&#160;</td>
          <td class="paramname"><em>groupGuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_a_p_i___user_data.html">API_UserData</a> *&#160;</td>
          <td class="paramname"><em>userData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attaches the user data to the element group. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">groupGuid</td><td>[in] Unique ID of the element group. </td></tr>
    <tr><td class="paramname">userData</td><td>[in] Pointer to the new user data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>NoError - The function has completed with success, a new user data has attached to the element group.</li>
<li>APIERR_NEEDSUNDOSCOPE - The function must be undoable, it wasn't called from an undoable command scope.</li>
<li>APIERR_BADID - Passed groupGuid ID is invalid.</li>
<li>APIERR_BADPARS - Passed groupGuid parameter is nullptr.</li>
<li>APIERR_BADPLATFORMSIGN - The given platform sign is invalid (out of range).</li>
<li>APIERR_MEMFULL - Out of memory. </li>
</ul>
</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>This function is used to attach user data to an element group. Use the <a class="el" href="group___grouping.html#gad146c33ef9d7502a0023a02d21be1e15">ACAPI_Grouping_GetUserData</a> function to get data from the element group. Existing user data can be deleted by setting userData input parameter to nullptr. Note that this function is not undoable. The caller should allocate and deallocate the userData-&gt;dataHdl handle. </dd></dl>

</div>
</div>
<a id="ga54eae84c9e9efaf0a18caaebe48df016" name="ga54eae84c9e9efaf0a18caaebe48df016"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga54eae84c9e9efaf0a18caaebe48df016">&#9670;&#160;</a></span>ACAPI_UserData_DeleteUserData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GSErrCode ACAPI_UserData_DeleteUserData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_a_p_i___elem___head.html">API_Elem_Head</a> *&#160;</td>
          <td class="paramname"><em>elemHead</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the user data attached to the specified element. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elemHead</td><td>[in] Identifies the element the user data is attached to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>NoError - The function has completed with success.</li>
<li>APIERR_BADPARS - The element does not contain any user data assigned by this add-on.</li>
<li>APIERR_BADPLATFORMSIGN - The platformsign field in the user data is invalid.</li>
<li>APIERR_BADID - The passed type is not correct. </li>
</ul>
</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>You can remove the user data that is no longer needed and is attached to an element with this function. </dd></dl>

</div>
</div>
<a id="gae9b0218b3cec7307ba01ee742ec08499" name="gae9b0218b3cec7307ba01ee742ec08499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9b0218b3cec7307ba01ee742ec08499">&#9670;&#160;</a></span>ACAPI_UserData_GetUserData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GSErrCode ACAPI_UserData_GetUserData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_a_p_i___attr___head.html">API_Attr_Head</a> *&#160;</td>
          <td class="paramname"><em>attrHead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___attribute.html#gaa9cfb11d312c694bd8c4df24afd00be6">API_AttributeUserData</a> *&#160;</td>
          <td class="paramname"><em>userData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains the user data attached to an attribute. </p>
<dl class="section since"><dt>Since</dt><dd>Archicad 27 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">attrHead</td><td>[in] Header of the attribute (only fields typeID and index are used). </td></tr>
    <tr><td class="paramname">userData</td><td>[in/out] Pointer to the user data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>NoError - The function has completed with success.</li>
<li>APIERR_BADPARS - Any of the passed parameters is nullptr</li>
<li>APIERR_BADPLATFORMSIGN - The user data contained platform sign is invalid (out of range)</li>
<li>APIERR_MEMFULL - Out of memory</li>
<li>APIERR_NOUSERDATA - No user data attached by the caller module </li>
</ul>
</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>This function is used to get the user attached data from an atribute. The typeID and index fields of the DDD record has to be filled to get the data attached to the attribute. The caller should not allocate the userData-&gt;dataHdl field. It's allocated by the function itself but should be destroyed after use by the caller! Use the <a class="el" href="group___user_data.html#ga92c2158188147f3bb6c5f56cdc1b7282">ACAPI_UserData_SetUserData</a> functions to push data into the attribute record. </dd></dl>

</div>
</div>
<a id="ga92c2158188147f3bb6c5f56cdc1b7282" name="ga92c2158188147f3bb6c5f56cdc1b7282"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga92c2158188147f3bb6c5f56cdc1b7282">&#9670;&#160;</a></span>ACAPI_UserData_SetUserData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GSErrCode ACAPI_UserData_SetUserData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_a_p_i___attr___head.html">API_Attr_Head</a> *&#160;</td>
          <td class="paramname"><em>attrHead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group___attribute.html#gaa9cfb11d312c694bd8c4df24afd00be6">API_AttributeUserData</a> *&#160;</td>
          <td class="paramname"><em>userData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attaches user data to an attribute, or deletes the attached data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">attrHead</td><td>[in] The attribute to attach the user data to is defined by the typeID and index fields of the header. </td></tr>
    <tr><td class="paramname">userData</td><td>[in] The user data to store. If dataHdl is nullptr, then the function deletes the user data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>NoError - The function has completed with success.</li>
<li>APIERR_BADPARS - A nullptr attrHead or userData pointer was passed.</li>
<li>APIERR_BADPLATFORMSIGN - The platform sign in the user data is invalid (out of range). </li>
</ul>
</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>This function is used to attach user data to an an atribute, or to delete the attached information (if userData-&gt;dataHdl is nullptr. The caller is responsible for allocating and deleting the userData-&gt;dataHdl. You can safely destroy the passed handle after use, as it is copied into the internal database. This function is a non-undoable data structure modifier function. See more details on this topic at Command Overview. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
</body>
</html>