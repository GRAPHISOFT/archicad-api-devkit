<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Archicad C++ API" />
<meta property="og:image" content="logo.svg" />
<meta property="og:description" content="Archicad Development Kit Documentation, best practices, example codes and information hub." />
<meta property="og:url" content="https://archicadapi.graphisoft.com/documentation/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="logo.svg" />
<meta name="twitter:title" content="Archicad C++ API" />
<meta name="twitter:description" content="Archicad Development Kit Documentation, best practices, example codes and information hub." />
<!-- END twitter metadata -->
<title>Archicad 29 C++ API: API_Polygon Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="https://fonts.cdnfonts.com/css/proxima-nova-2" rel="stylesheet">
<link rel="icon" href="logo.svg" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Archicad 29 C++ API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('struct_a_p_i___polygon.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="struct_a_p_i___polygon-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">API_Polygon Struct Reference<div class="ingroups"><a class="el" href="group___dialog.html">Dialog and Palette integration</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Representation of a two dimensional polygon.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;APIdefs_Base.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a058aff292e4bc79a2959cd60833dceed" id="r_a058aff292e4bc79a2959cd60833dceed"><td class="memItemLeft" align="right" valign="top"><a id="a058aff292e4bc79a2959cd60833dceed" name="a058aff292e4bc79a2959cd60833dceed"></a>
Int32&#160;</td><td class="memItemRight" valign="bottom"><b>nCoords</b></td></tr>
<tr class="memdesc:a058aff292e4bc79a2959cd60833dceed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of elements in the coordinate array. The begin points of contours are duplicated. <br /></td></tr>
<tr class="separator:a058aff292e4bc79a2959cd60833dceed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dea77334b2f6f44bad8551099802311" id="r_a4dea77334b2f6f44bad8551099802311"><td class="memItemLeft" align="right" valign="top"><a id="a4dea77334b2f6f44bad8551099802311" name="a4dea77334b2f6f44bad8551099802311"></a>
Int32&#160;</td><td class="memItemRight" valign="bottom"><b>nSubPolys</b></td></tr>
<tr class="memdesc:a4dea77334b2f6f44bad8551099802311"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of closed subpolygons including the main polygon. For polylines, this is always 1. <br /></td></tr>
<tr class="separator:a4dea77334b2f6f44bad8551099802311"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a320a7e37114226dddf665cae9507f612" id="r_a320a7e37114226dddf665cae9507f612"><td class="memItemLeft" align="right" valign="top"><a id="a320a7e37114226dddf665cae9507f612" name="a320a7e37114226dddf665cae9507f612"></a>
Int32&#160;</td><td class="memItemRight" valign="bottom"><b>nArcs</b></td></tr>
<tr class="memdesc:a320a7e37114226dddf665cae9507f612"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of arched segments in the polygon/polyline. <br /></td></tr>
<tr class="separator:a320a7e37114226dddf665cae9507f612"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Representation of a two dimensional polygon. </p>
<dl class="section remark"><dt>Remarks</dt><dd>This structure holds the size of the corresponding geometry only, i.e. the number of nodes, number of subpolygons and number of arc segments in the polygon shape. The geometry data is always passed through an <a class="el" href="struct_a_p_i___element_memo.html">API_ElementMemo</a> structure. What are the components:<ul>
<li>2D coordinates; represented by an <a class="el" href="struct_a_p_i___coord.html">API_Coord</a> array.</li>
<li>subpolygons; represented by an index (Int32) array to the coordinates. Each index points to the last coordinate of a contour.</li>
<li>arc segments; represented by an <a class="el" href="struct_a_p_i___poly_arc.html">API_PolyArc</a> array. Let's see an example, with the list of rules. <div class="image">
<img src="polygon.png" alt=""/>
<div class="caption">
API Polygon</div></div>
 Coordinates:</li>
</ul>
</dd></dl>
<ul>
<li>poly-&gt;nCoords = BMGetHandleSize ((GSHandle) memo-&gt;coords) / sizeof (<a class="el" href="struct_a_p_i___coord.html" title="A pair of Cartesian (real) coordinates.">API_Coord</a>) - 1;</li>
<li>the first coordinate of the array is not used; must be initialized to (0.0, 0.0) for polygons, and to (-1.0, 0.0) for polylines,</li>
<li>coordinates are duplicated for the end-nodes for each subcontour (see c 1 and c 7 ) Contour ends:</li>
<li>poly-&gt;nSubPolys = BMGetHandleSize ((GSHandle) memo-&gt;pends) / sizeof (Int32) - 1;</li>
<li>the pends array contains indices to the coordinate array, indicating the vertices which close the subcontours</li>
<li>the first element is always 0 Arc segments:</li>
<li>poly-&gt;nArcs = BMGetHandleSize ((GSHandle) memo-&gt;parcs) / sizeof (<a class="el" href="struct_a_p_i___poly_arc.html" title="Representation of an arc segment of a two dimensional polygon.">API_PolyArc</a>);</li>
<li>the parcs array is allocated only if there are any arc segments in the polygon,</li>
<li>each record refers to two coordinate indices ( begIndex, endIndex) between which the polygon edge is an arc,</li>
<li>each record gives the signed arc angle. The angle is positive, if the arc is on the right-hand side of the (begPoint, endPoint) segment,</li>
<li>the angle is given in radians (degrees are shown on the picture only for better readability) Vertex IDs:</li>
<li>the number of coordinates and the number of vertexIDs are equal; each coordinate has a vertexID. That's why the <a class="el" href="struct_a_p_i___polygon.html">API_Polygon</a> structure does not contain an nVertexID field,</li>
<li>vertexIDs can be called as node unique IDs (that's why c 1 and c 6 have the same vertex ID),</li>
<li>the maximal vertexID value is stored in the 0. cell,</li>
<li>there isn't any correspondence between the coordinate indices and the assigned vertexIDs; however they are often the same. (See that c 6 has the ID 1.),</li>
<li>upon editing the polygon shape the maximal vertexID can be not be decremented, and the nodes must keep the vertexID values</li>
<li>vertex IDs are useful in dimensioning and editing Editing the shape of a polygon covers many difficulties which must be handled. They are:</li>
<li>vertex IDs must be maintained,</li>
<li>arc references must be updated; partially,</li>
<li>contour-end references must be updated; partially. Use the provided functions to change the shape of a polygon. These functions are:</li>
<li><a class="el" href="group___polygon.html#ga49b8562c308da08eb5ae3c88c3a93ff6">ACAPI_Polygon_InsertPolyNode</a></li>
<li><a class="el" href="group___polygon.html#gae52339d764287dce148f79251c378043">ACAPI_Polygon_DeletePolyNode</a></li>
<li><a class="el" href="group___polygon.html#ga9f89b41a2db77cdfda4c4e4e50453a73">ACAPI_Polygon_InsertSubPoly</a></li>
<li><a class="el" href="group___polygon.html#gaa44814ed75573ef211a7c5e127cc229b">ACAPI_Polygon_DeleteSubPoly</a> <dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line">Int32 FindArc (<a class="code hl_struct" href="struct_a_p_i___poly_arc.html">API_PolyArc</a> *parcs, Int32 nArcs, Int32 node)</div>
<div class="line">{</div>
<div class="line">    Int32       i;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parcs == <span class="keyword">nullptr</span>)</div>
<div class="line">        <span class="keywordflow">return</span> (-1);</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; nArcs; i++)</div>
<div class="line">        <span class="keywordflow">if</span> (parcs [i].begIndex == node)</div>
<div class="line">            <span class="keywordflow">return</span> (i);</div>
<div class="line">    <span class="keywordflow">return</span> (-1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> TrackPoly (<span class="keyword">const</span> <a class="code hl_struct" href="struct_a_p_i___polygon.html">API_Polygon</a> *poly, <span class="keyword">const</span> <a class="code hl_struct" href="struct_a_p_i___element_memo.html">API_ElementMemo</a> *memo)</div>
<div class="line">{</div>
<div class="line">    Int32 j, i, begInd, endInd;</div>
<div class="line">    <a class="code hl_struct" href="struct_a_p_i___coord.html">API_Coord</a> begC, endC;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (j = 1; j &lt;= poly-&gt;<a class="code hl_variable" href="#a4dea77334b2f6f44bad8551099802311">nSubPolys</a>; j++) {</div>
<div class="line">        begInd = (*memo-&gt;<a class="code hl_variable" href="struct_a_p_i___element_memo.html#a15a1df965ee6d0ba8d31628c0f012dd3">pends</a>) [j-1] + 1;</div>
<div class="line">        endInd = (*memo-&gt;<a class="code hl_variable" href="struct_a_p_i___element_memo.html#a15a1df965ee6d0ba8d31628c0f012dd3">pends</a>) [j];</div>
<div class="line">        <span class="keywordflow">for</span> (i = begInd; i &lt; endInd; i++) {</div>
<div class="line">            begC = (*memo-&gt;<a class="code hl_variable" href="struct_a_p_i___element_memo.html#a1659c234adfb13523347e1bc49cbb4e5">coords</a>) [i];</div>
<div class="line">            endC = (*memo-&gt;<a class="code hl_variable" href="struct_a_p_i___element_memo.html#a1659c234adfb13523347e1bc49cbb4e5">coords</a>) [i+1];</div>
<div class="line">            FindArc (*memo-&gt;<a class="code hl_variable" href="struct_a_p_i___element_memo.html#a8c6f8b9eea8d523884f4210916292009">parcs</a>, poly-&gt;<a class="code hl_variable" href="#a320a7e37114226dddf665cae9507f612">nArcs</a>, i);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
</body>
</html>
