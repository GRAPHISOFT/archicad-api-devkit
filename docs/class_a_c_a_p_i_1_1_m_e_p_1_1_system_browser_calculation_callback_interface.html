<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Archicad C++ API" />
<meta property="og:image" content="logo.svg" />
<meta property="og:description" content="Archicad Development Kit Documentation, best practices, example codes and information hub." />
<meta property="og:url" content="https://archicadapi.graphisoft.com/documentation/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="logo.svg" />
<meta name="twitter:title" content="Archicad C++ API" />
<meta name="twitter:description" content="Archicad Development Kit Documentation, best practices, example codes and information hub." />
<!-- END twitter metadata -->
<title>Archicad 29 C++ API: ACAPI::MEP::SystemBrowserCalculationCallbackInterface Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="https://fonts.cdnfonts.com/css/proxima-nova-2" rel="stylesheet">
<link rel="icon" href="logo.svg" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Archicad 29 C++ API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_a_c_a_p_i_1_1_m_e_p_1_1_system_browser_calculation_callback_interface.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="class_a_c_a_p_i_1_1_m_e_p_1_1_system_browser_calculation_callback_interface-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ACAPI::MEP::SystemBrowserCalculationCallbackInterface Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span><div class="ingroups"><a class="el" href="group___m_e_p.html">MEP Element Manager</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Interface for handling calculated columns in the system browser.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;MEPSystemBrowserCalculationCallbackInterface.hpp&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_a_c_a_p_i_1_1_m_e_p_1_1_system_browser_calculation_callback_interface_1_1_column_row_entry.html">ColumnRowEntry</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The signature of the entries in the result data. The row is decided by the system browser, so the entry is identified using the associated element id instead.  <a href="struct_a_c_a_p_i_1_1_m_e_p_1_1_system_browser_calculation_callback_interface_1_1_column_row_entry.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ae8c1574c00d82b834d35b47a4c81f773" id="r_ae8c1574c00d82b834d35b47a4c81f773"><td class="memItemLeft" align="right" valign="top"><a id="ae8c1574c00d82b834d35b47a4c81f773" name="ae8c1574c00d82b834d35b47a4c81f773"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>CalculationResultData</b> = std::vector&lt;<a class="el" href="struct_a_c_a_p_i_1_1_m_e_p_1_1_system_browser_calculation_callback_interface_1_1_column_row_entry.html">ColumnRowEntry</a>&gt;</td></tr>
<tr class="memdesc:ae8c1574c00d82b834d35b47a4c81f773"><td class="mdescLeft">&#160;</td><td class="mdescRight">The signature of the result data. <br /></td></tr>
<tr class="separator:ae8c1574c00d82b834d35b47a4c81f773"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a30782f9fc2f564e651246237f80a5a38" id="r_a30782f9fc2f564e651246237f80a5a38"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; const <a class="el" href="class_a_c_a_p_i_1_1_m_e_p_1_1_i_calculation_result_column.html">ICalculationResultColumn</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a30782f9fc2f564e651246237f80a5a38">RegisterCalculatedColumns</a> ()=0</td></tr>
<tr class="memdesc:a30782f9fc2f564e651246237f80a5a38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register columns that is managed by this interface.  <br /></td></tr>
<tr class="separator:a30782f9fc2f564e651246237f80a5a38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28f639500819766fd50118651de4adc5" id="r_a28f639500819766fd50118651de4adc5"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a28f639500819766fd50118651de4adc5">CalculationsRequested</a> (const GS::Guid &amp;rootElement, const <a class="el" href="class_a_c_a_p_i_1_1_m_e_p_1_1_distribution_systems_graph.html">DistributionSystemsGraph</a> &amp;system)=0</td></tr>
<tr class="memdesc:a28f639500819766fd50118651de4adc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function invoked every time the system browser detects that a system affecting some registered calculated columns was modified.  <br /></td></tr>
<tr class="separator:a28f639500819766fd50118651de4adc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8adc99cc1acaab1d5a49929d45240965" id="r_a8adc99cc1acaab1d5a49929d45240965"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8adc99cc1acaab1d5a49929d45240965">SubmitCalculations</a> (const <a class="el" href="#ae8c1574c00d82b834d35b47a4c81f773">CalculationResultData</a> &amp;results) const</td></tr>
<tr class="memdesc:a8adc99cc1acaab1d5a49929d45240965"><td class="mdescLeft">&#160;</td><td class="mdescRight">Informs the system browser of modifications to the registered columns. Use this to to respond to a calculation request from the system browser.  <br /></td></tr>
<tr class="separator:a8adc99cc1acaab1d5a49929d45240965"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a9ff6dec6fdb19ba9adbbe21a64a4495a" id="r_a9ff6dec6fdb19ba9adbbe21a64a4495a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_a_c_a_p_i_1_1_result.html">Result</a>&lt; void &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9ff6dec6fdb19ba9adbbe21a64a4495a">RegisterCalculationCallback</a> (<a class="el" href="class_a_c_a_p_i_1_1_m_e_p_1_1_system_browser_calculation_callback_interface.html">SystemBrowserCalculationCallbackInterface</a> &amp;callbackInterface)</td></tr>
<tr class="memdesc:a9ff6dec6fdb19ba9adbbe21a64a4495a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a custom callback interface implementation.  <br /></td></tr>
<tr class="separator:a9ff6dec6fdb19ba9adbbe21a64a4495a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interface for handling calculated columns in the system browser. </p>
<p>You can implement this interface in your add-on to provide custom columns in the system browser that gets calculated on demand. This interface does two things:</p><ul>
<li>It registers additional columns that should be displayed in the system browser.</li>
<li>It provides a system for updating the (registered) column values when system attributes change.</li>
</ul>
<p>This communication between the browser and the add-on works both ways: The system browser will notify any registered <a class="el" href="class_a_c_a_p_i_1_1_m_e_p_1_1_system_browser_calculation_callback_interface.html" title="Interface for handling calculated columns in the system browser.">SystemBrowserCalculationCallbackInterface</a> instances that it's registered columns might need recalculation, and the add-on can inform the system browser to update it's displayed values for the registered columns.</p>
<dl class="section since"><dt>Since</dt><dd>Archicad 29</dd></dl>
<div class="fragment"><div class="line"><span class="keyword">class </span>TestCalculationCallback : <span class="keyword">public</span> <a class="code hl_class" href="class_a_c_a_p_i_1_1_m_e_p_1_1_system_browser_calculation_callback_interface.html">ACAPI::MEP::SystemBrowserCalculationCallbackInterface</a> {</div>
<div class="line">    <span class="keyword">public</span>:</div>
<div class="line">        TestColumn1 testColumn;</div>
<div class="line"> </div>
<div class="line">        TestCalculationCallback () = <span class="keywordflow">default</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// ! [SystemBrowserCalculationCallbackInterface_RegisterCalculatedColumns_Example]</span></div>
<div class="line">        <span class="keyword">virtual</span> std::vector&lt;const ACAPI::MEP::ICalculationResultColumn*&gt; <a class="code hl_function" href="#a30782f9fc2f564e651246237f80a5a38">RegisterCalculatedColumns</a> ()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">        </span>{</div>
<div class="line">            <span class="keywordflow">return</span> { &amp;testColumn };</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// ! [SystemBrowserCalculationCallbackInterface_RegisterCalculatedColumns_Example]</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// ! [SystemBrowserCalculationCallbackInterface_CalculationsRequested_Example]</span></div>
<div class="line">        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="#a28f639500819766fd50118651de4adc5">CalculationsRequested</a> (<span class="keyword">const</span> GS::Guid&amp; root, <span class="keyword">const</span> <a class="code hl_class" href="class_a_c_a_p_i_1_1_m_e_p_1_1_distribution_systems_graph.html">ACAPI::MEP::DistributionSystemsGraph</a>&amp; graph)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">        </span>{</div>
<div class="line">            Reporter reporter;</div>
<div class="line">            reporter.Add (GS::UniString::Printf (<span class="stringliteral">&quot;Calculation callback was called on root element %T!&quot;</span>, root.ToUniString ().ToPrintf ()));</div>
<div class="line">            reporter.AddNewLine ();</div>
<div class="line">            reporter.Add (GS::UniString::Printf (<span class="stringliteral">&quot;In a graph with %zu systems!&quot;</span>, graph.<a class="code hl_function" href="class_a_c_a_p_i_1_1_m_e_p_1_1_distribution_systems_graph.html#ade77fbad53c013d09f62d157d8f9547b">GetSystems</a> ().size ()));</div>
<div class="line">            reporter.AddNewLine ();</div>
<div class="line">            reporter.Write ();</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// ! [SystemBrowserCalculationCallbackInterface_CalculationsRequested_Example]</span></div>
<div class="line"> </div>
<div class="line">        <span class="keyword">virtual</span> ~TestCalculationCallback () = <span class="keywordflow">default</span>;</div>
<div class="line">    };</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="group___m_e_p.html#ga827e5a7ebe74706b932f1b34478ac7f2" title="Registers a custom callback interface implementation.">ACAPI::MEP::RegisterCalculationCallback</a></dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>This interface replaces the ACAPI::MEP::GraphCalculationInterface interface from Archicad 28. The new interface supports the same functionality as the old one, but using a friendlier syntax. Here's a small guide on how to transition your old implementation to this new interface: <div class="fragment"><div class="line"><span class="comment">// Using ACAPI::MEP::GraphCalculationInterface:</span></div>
<div class="line">std::shared_ptr&lt;void&gt; registrationInstance;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>MyCoolColumn : <span class="keyword">public</span> <a class="code hl_class" href="class_a_c_a_p_i_1_1_m_e_p_1_1_typed_calculation_result_column.html">ACAPI::MEP::TypedCalculationResultColumn</a>&lt;GS::UniString&gt;</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> CallbackHandlerFunction (<span class="keyword">const</span> GS::Guid&amp; root, <span class="keyword">const</span> <a class="code hl_class" href="class_a_c_a_p_i_1_1_m_e_p_1_1_distribution_systems_graph.html">ACAPI::MEP::DistributionSystemsGraph</a>&amp; graph)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Some code being executed when a calculation is requested from the browser...</span></div>
<div class="line">    ...</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Inform browser of changes to the columns:</span></div>
<div class="line">    <a class="code hl_class" href="class_a_c_a_p_i_1_1_result.html">ACAPI::Result&lt;ACAPI::MEP::GraphCalculationInterface&gt;</a> calculationInterface = ACAPI::MEP::CreateCalculationInterface ();</div>
<div class="line">    calculationInterface-&gt;InvokeCalculationResults (changes);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_friend" href="#a9ff6dec6fdb19ba9adbbe21a64a4495a">RegisterCalculationCallback</a> ()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_class" href="class_a_c_a_p_i_1_1_result.html">ACAPI::Result&lt;ACAPI::MEP::GraphCalculationInterface&gt;</a> calculationInterface = ACAPI::MEP::CreateCalculationInterface ();</div>
<div class="line"> </div>
<div class="line">    MyCoolColumn myCoolColumn;</div>
<div class="line">    std::vector&lt;const ACAPI::MEP::ICalculationResultColumn*&gt; columnsToShowInBrowser;</div>
<div class="line">    columnsToShowInBrowser.emplace_back (&amp;myCoolColumn);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="class_a_c_a_p_i_1_1_result.html">ACAPI::Result&lt;std::shared_ptr&lt;void&gt;</a>&gt; registrationResult = calculationInterface-&gt;RegisterDoCalculationCallback (&amp;CallbackHandlerFunction, columnsToShowInBrowser);</div>
<div class="line">    registrationInstance = registrationResult.<a class="code hl_function" href="class_a_c_a_p_i_1_1_result.html#a3ab9cb4a2ae3f4c0c18fb54344c012f5">Unwrap</a> ();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// Using ACAPI::MEP::SystemBrowserCalculationCallbackInterface:</span></div>
<div class="line">std::shared_ptr&lt;void&gt; registrationInstance;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>MyCoolColumn : <span class="keyword">public</span> <a class="code hl_class" href="class_a_c_a_p_i_1_1_m_e_p_1_1_typed_calculation_result_column.html">ACAPI::MEP::TypedCalculationResultColumn</a>&lt;GS::UniString&gt;</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>MyCalculationCallback : <span class="keyword">public</span> <a class="code hl_class" href="class_a_c_a_p_i_1_1_m_e_p_1_1_system_browser_calculation_callback_interface.html">ACAPI::MEP::SystemBrowserCalculationCallbackInterface</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    MyCoolColumn myCoolColumn;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">virtual</span> std::vector&lt;const ACAPI::MEP::ICalculationResultColumn*&gt; RegisterCalculatedColumns ()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">return</span> { &amp;myCoolColumn };</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> CalculationsRequested (<span class="keyword">const</span> GS::Guid&amp; root, <span class="keyword">const</span> <a class="code hl_class" href="class_a_c_a_p_i_1_1_m_e_p_1_1_distribution_systems_graph.html">ACAPI::MEP::DistributionSystemsGraph</a>&amp; graph)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="comment">// Some code being executed when a calculation is requested from the browser...</span></div>
<div class="line">        ...</div>
<div class="line">        </div>
<div class="line">        <span class="comment">// Inform browser of changes to the columns:</span></div>
<div class="line">        SubmitCalculations (changes);</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">MyCalculationCallback registrationInstance;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_friend" href="#a9ff6dec6fdb19ba9adbbe21a64a4495a">RegisterCalculationCallback</a> ()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="group___m_e_p.html#ga827e5a7ebe74706b932f1b34478ac7f2">ACAPI::MEP::RegisterCalculationCallback</a> (registrationInstance);</div>
<div class="line">}</div>
<div class="ttc" id="aclass_a_c_a_p_i_1_1_m_e_p_1_1_distribution_systems_graph_html"><div class="ttname"><a href="class_a_c_a_p_i_1_1_m_e_p_1_1_distribution_systems_graph.html">ACAPI::MEP::DistributionSystemsGraph</a></div><div class="ttdoc">A graph data structure to display MEP distribution systems data.</div><div class="ttdef"><b>Definition</b> MEPDistributionSystemsGraph.hpp:43</div></div>
<div class="ttc" id="aclass_a_c_a_p_i_1_1_m_e_p_1_1_system_browser_calculation_callback_interface_html"><div class="ttname"><a href="class_a_c_a_p_i_1_1_m_e_p_1_1_system_browser_calculation_callback_interface.html">ACAPI::MEP::SystemBrowserCalculationCallbackInterface</a></div><div class="ttdoc">Interface for handling calculated columns in the system browser.</div><div class="ttdef"><b>Definition</b> MEPSystemBrowserCalculationCallbackInterface.hpp:254</div></div>
<div class="ttc" id="aclass_a_c_a_p_i_1_1_m_e_p_1_1_system_browser_calculation_callback_interface_html_a9ff6dec6fdb19ba9adbbe21a64a4495a"><div class="ttname"><a href="#a9ff6dec6fdb19ba9adbbe21a64a4495a">ACAPI::MEP::SystemBrowserCalculationCallbackInterface::RegisterCalculationCallback</a></div><div class="ttdeci">friend Result&lt; void &gt; RegisterCalculationCallback(SystemBrowserCalculationCallbackInterface &amp;callbackInterface)</div><div class="ttdoc">Registers a custom callback interface implementation.</div><div class="ttdef"><b>Definition</b> MEPSystemBrowserCalculationCallbackInterface.hpp:342</div></div>
<div class="ttc" id="aclass_a_c_a_p_i_1_1_m_e_p_1_1_typed_calculation_result_column_html"><div class="ttname"><a href="class_a_c_a_p_i_1_1_m_e_p_1_1_typed_calculation_result_column.html">ACAPI::MEP::TypedCalculationResultColumn</a></div><div class="ttdoc">Template typed version of the ICalculationResultColumn interface.</div><div class="ttdef"><b>Definition</b> MEPSystemBrowserCalculationCallbackInterface.hpp:107</div></div>
<div class="ttc" id="aclass_a_c_a_p_i_1_1_result_html"><div class="ttname"><a href="class_a_c_a_p_i_1_1_result.html">ACAPI::Result</a></div><div class="ttdoc">Result is the standard return type of API functions.</div><div class="ttdef"><b>Definition</b> Result.hpp:845</div></div>
<div class="ttc" id="aclass_a_c_a_p_i_1_1_result_html_a3ab9cb4a2ae3f4c0c18fb54344c012f5"><div class="ttname"><a href="class_a_c_a_p_i_1_1_result.html#a3ab9cb4a2ae3f4c0c18fb54344c012f5">ACAPI::Result::Unwrap</a></div><div class="ttdeci">std::enable_if_t&lt;!std::is_same_v&lt; U, void &gt;, U &gt; &amp;&amp; Unwrap() &amp;&amp;</div><div class="ttdoc">Unwraps the value contained in the Result. Trying to Unwrap the value while it contains an error will...</div><div class="ttdef"><b>Definition</b> Result.hpp:1086</div></div>
<div class="ttc" id="agroup___m_e_p_html_ga827e5a7ebe74706b932f1b34478ac7f2"><div class="ttname"><a href="group___m_e_p.html#ga827e5a7ebe74706b932f1b34478ac7f2">ACAPI::MEP::RegisterCalculationCallback</a></div><div class="ttdeci">Result&lt; void &gt; RegisterCalculationCallback(SystemBrowserCalculationCallbackInterface &amp;callbackInterface)</div><div class="ttdoc">Registers a custom callback interface implementation.</div><div class="ttdef"><b>Definition</b> MEPSystemBrowserCalculationCallbackInterface.hpp:342</div></div>
</div><!-- fragment --> </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a28f639500819766fd50118651de4adc5" name="a28f639500819766fd50118651de4adc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28f639500819766fd50118651de4adc5">&#9670;&#160;</a></span>CalculationsRequested()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ACAPI::MEP::SystemBrowserCalculationCallbackInterface::CalculationsRequested </td>
          <td>(</td>
          <td class="paramtype">const GS::Guid &amp;</td>          <td class="paramname"><span class="paramname"><em>rootElement</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_a_c_a_p_i_1_1_m_e_p_1_1_distribution_systems_graph.html">DistributionSystemsGraph</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>system</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function invoked every time the system browser detects that a system affecting some registered calculated columns was modified. </p>
<p>The system browser will invoke this function whenever a system related parameter changes that could affect the calculated values. Examples when this occours include, but is not limited to, when elements are added or removed from the system and when element dimensions or certain element specific or system specific parameters are changed. The system browser is also free to skip invoking this function if the modified system is not covered by the registered columns. When calculations are finished, add-ons can choose to respond to this request by invoking <a class="el" href="#a8adc99cc1acaab1d5a49929d45240965" title="Informs the system browser of modifications to the registered columns. Use this to to respond to a ca...">SystemBrowserCalculationCallbackInterface::SubmitCalculations</a> to update the displayed values in the system browser. </p><dl class="section remark"><dt>Remarks</dt><dd>This function is invoked from the system browser based on model changes empirically determined to affect the calculated values. But as the displayed values are implementation defined, the detected changes may not always actually affect the displayed values. Therefore there's no requirement to "respond" to SubmitCalculations after receiving a CalculationsRequested call. Similarly, an add-on is free to invoke SubmitCalculations at any time, regardless of whether a CalculationsRequested call has been received. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rootElement</td><td>The "root" element of the system that has been modified. </td></tr>
    <tr><td class="paramname">system</td><td>The distribution systems graph that contains the modified system.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="#a28f639500819766fd50118651de4adc5">CalculationsRequested</a> (<span class="keyword">const</span> GS::Guid&amp; root, <span class="keyword">const</span> <a class="code hl_class" href="class_a_c_a_p_i_1_1_m_e_p_1_1_distribution_systems_graph.html">ACAPI::MEP::DistributionSystemsGraph</a>&amp; graph)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">        </span>{</div>
<div class="line">            Reporter reporter;</div>
<div class="line">            reporter.Add (GS::UniString::Printf (<span class="stringliteral">&quot;Calculation callback was called on root element %T!&quot;</span>, root.ToUniString ().ToPrintf ()));</div>
<div class="line">            reporter.AddNewLine ();</div>
<div class="line">            reporter.Add (GS::UniString::Printf (<span class="stringliteral">&quot;In a graph with %zu systems!&quot;</span>, graph.<a class="code hl_function" href="class_a_c_a_p_i_1_1_m_e_p_1_1_distribution_systems_graph.html#ade77fbad53c013d09f62d157d8f9547b">GetSystems</a> ().size ()));</div>
<div class="line">            reporter.AddNewLine ();</div>
<div class="line">            reporter.Write ();</div>
<div class="line">        }</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a30782f9fc2f564e651246237f80a5a38" name="a30782f9fc2f564e651246237f80a5a38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30782f9fc2f564e651246237f80a5a38">&#9670;&#160;</a></span>RegisterCalculatedColumns()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::vector&lt; const <a class="el" href="class_a_c_a_p_i_1_1_m_e_p_1_1_i_calculation_result_column.html">ICalculationResultColumn</a> * &gt; ACAPI::MEP::SystemBrowserCalculationCallbackInterface::RegisterCalculatedColumns </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Register columns that is managed by this interface. </p>
<p>The system browser will invoke this once on initialization. The columns are unregistered when this interface instance goes out of scope and it's destructor is called. Deleting the memory pointed to by the pointers returned from this function before the interface goes out of scope leads to undefined behavior. </p><dl class="section return"><dt>Returns</dt><dd>A vector of pointers to the columns that this interface will manage.</dd></dl>
<div class="fragment"><div class="line">        <span class="keyword">virtual</span> std::vector&lt;const ACAPI::MEP::ICalculationResultColumn*&gt; <a class="code hl_function" href="#a30782f9fc2f564e651246237f80a5a38">RegisterCalculatedColumns</a> ()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">        </span>{</div>
<div class="line">            <span class="keywordflow">return</span> { &amp;testColumn };</div>
<div class="line">        }</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a8adc99cc1acaab1d5a49929d45240965" name="a8adc99cc1acaab1d5a49929d45240965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8adc99cc1acaab1d5a49929d45240965">&#9670;&#160;</a></span>SubmitCalculations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ACAPI::MEP::SystemBrowserCalculationCallbackInterface::SubmitCalculations </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="#ae8c1574c00d82b834d35b47a4c81f773">CalculationResultData</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>results</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Informs the system browser of modifications to the registered columns. Use this to to respond to a calculation request from the system browser. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">results</td><td>A vector of column-row entries representing the results of the calculation.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">    <a class="code hl_typedef" href="#ae8c1574c00d82b834d35b47a4c81f773">ACAPI::MEP::SystemBrowserCalculationCallbackInterface::CalculationResultData</a> changedElements;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Generate some random values to display in the system browser:</span></div>
<div class="line">    <span class="keyword">auto</span> genRandomNum = [gen = std::default_random_engine {}, dist = std::uniform_real_distribution&lt;&gt; { 0.1, 100.0 }] () <span class="keyword">mutable</span></div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> dist (gen);</div>
<div class="line">        };</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_class" href="class_a_c_a_p_i_1_1_m_e_p_1_1_unique_i_d.html">ACAPI::MEP::UniqueID</a>&amp; element : graphElements) {</div>
<div class="line">        changedElements.emplace_back (<a class="code hl_struct" href="struct_a_c_a_p_i_1_1_m_e_p_1_1_system_browser_calculation_callback_interface_1_1_column_row_entry.html">ACAPI::MEP::SystemBrowserCalculationCallbackInterface::ColumnRowEntry</a> { element.GetGuid (), testCallback.testColumn.GetId (), genRandomNum () });</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    testCallback.SubmitCalculations (changedElements);</div>
</div><!-- fragment --> 
</div>
</div>
<h2 class="groupheader">Friends And Related Symbol Documentation</h2>
<a id="a9ff6dec6fdb19ba9adbbe21a64a4495a" name="a9ff6dec6fdb19ba9adbbe21a64a4495a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ff6dec6fdb19ba9adbbe21a64a4495a">&#9670;&#160;</a></span>RegisterCalculationCallback</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_a_c_a_p_i_1_1_result.html">Result</a>&lt; void &gt; RegisterCalculationCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_a_c_a_p_i_1_1_m_e_p_1_1_system_browser_calculation_callback_interface.html">SystemBrowserCalculationCallbackInterface</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>callbackInterface</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Registers a custom callback interface implementation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callbackInterface</td><td>The custom callback interface implementation to register. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_a_c_a_p_i_1_1_error.html" title="Error type for ACAPI::Result containing an error message and an error code.">Error</a> if registration failed, otherwise nothing. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>Archicad 29</dd></dl>
<div class="fragment"><div class="line">    TestCalculationCallback testCallback;</div>
<div class="line">    <a class="code hl_class" href="class_a_c_a_p_i_1_1_result.html">ACAPI::Result&lt;void&gt;</a> result = <a class="code hl_function" href="group___m_e_p.html#ga827e5a7ebe74706b932f1b34478ac7f2">ACAPI::MEP::RegisterCalculationCallback</a> (testCallback);</div>
<div class="line">    <span class="keywordflow">if</span> (result.<a class="code hl_function" href="class_a_c_a_p_i_1_1_result.html#a890dc4c1dff9e73a993a2410750d8d52">IsErr</a> ())</div>
<div class="line">        <span class="keywordflow">return</span> result.<a class="code hl_function" href="class_a_c_a_p_i_1_1_result.html#a750f5fba77e0d18fc6b194a11c98244c">UnwrapErr</a> ().kind;</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
</body>
</html>
