<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Archicad C++ API" />
<meta property="og:image" content="logo.svg" />
<meta property="og:description" content="Archicad Development Kit Documentation, best practices, example codes and information hub." />
<meta property="og:url" content="https://archicadapi.graphisoft.com/documentation/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="logo.svg" />
<meta name="twitter:title" content="Archicad C++ API" />
<meta name="twitter:description" content="Archicad Development Kit Documentation, best practices, example codes and information hub." />
<!-- END twitter metadata -->
<title>Archicad 28 C++ API: FAQ</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="https://fonts.cdnfonts.com/css/proxima-nova-2" rel="stylesheet">
<link rel="icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#6390f9">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#ffffff">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Archicad 28 C++ API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__common_doxygen_files_2_articles_2_f_a_q.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">FAQ </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="FAQ"></a> </p>
<h1><a class="anchor" id="autotoc_md13"></a>
Frequently asked questions</h1>
<ol type="1">
<li>What's the required format of User Controls in the .grc file?</li>
</ol>
<p>The required format of UserControl items in the .grc files always caused a headache. In this document, we'll explain the meaning of the different numbers behind the UserControl definition. Let's see them type by type. The examples were mostly taken from <b>DG_Test</b>, which is part of the development kit.</p>
<h2><a class="anchor" id="autotoc_md14"></a>
UserControl 257</h2>
<p>This control is a collection of special controls; it encapsulates controls which are very different in appearance, but not in functionality. Basically this control consists of a button, which pops up a palette when clicked. The content of the button is updated as the user moves the mouse above the palette.</p>
<p>Examples: material, pen, layer palette pop-up.</p>
<div class="image">
<img src="257.png" alt=""/>
</div>
<p>The generic format of this control is: </p><pre class="fragment">UserControl   87 82 33 19 257   0x0001   0x1100   0   /* Line Pen Setting */
</pre><p> Let's see the 'numbers' one by one:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Item   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Example    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>UserControl</code>   </td><td class="markdownTableBodyNone">the type of the dialog item   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>87 82 33 19</code>   </td><td class="markdownTableBodyNone">the item's rectangle (top, left, width, height)   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>257</code>   </td><td class="markdownTableBodyNone">the type of the user control   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>0x0001</code>   </td><td class="markdownTableBodyNone">defines the subtype of the user control (see the constants starting with <code>T257_</code> in <code>UCDefs.h</code>) <em>Note: <code>0x0001</code> is <code>T257_PEN</code>, so this is a pen control</em>   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>0x1100</code>   </td><td class="markdownTableBodyNone">the upper byte modifies the appearance of the user control (see the constants starting with <code>CS257_</code> in <code>UCDefs.h</code>) <em>Note: not all the flags are valid for all types of controls</em> the lower byte is always <code>00</code>   </td><td class="markdownTableBodyNone"><code>0x11</code> is <code>CS257_HEADER</code> | <code>CS257_SMALLFONT</code>, so the pop-up palette will have a header, and the menu items and the header will use the small application font.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>0</code>   </td><td class="markdownTableBodyNone">used in textual pop-ups only <code>T257_TEXT</code> and <code>T257_MENU</code>; it contains the id of the &lsquo;'STR#&rsquo;` resource containing the menu items <em>Note: due to a bug in the dialog manager, this cannot be used at the moment</em>   </td><td class="markdownTableBodyNone"></td></tr>
</table>
<h2><a class="anchor" id="autotoc_md15"></a>
UserControl 258</h2>
<p>This control is an icon-based pop-up control. The icons coming from the specified resource appear on the pop-up palette.</p>
<p>Example: suspend groups selector on the control box.</p>
<div class="image">
<img src="258.png" alt=""/>
</div>
<p>The generic format of this control is: </p><pre class="fragment">UserControl   12  8  66 22  258  2  14  0  1  32520
</pre><p> Let's see the 'numbers' one by one:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Item   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>UserControl</code>   </td><td class="markdownTableBodyNone">the type of the dialog item    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>12 8 66 22</code>   </td><td class="markdownTableBodyNone">the item's rectangle (top, left, width, height)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>258</code>   </td><td class="markdownTableBodyNone">the type of the user control    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>2</code>   </td><td class="markdownTableBodyNone">specifies the number of rows you would like to see the icons    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>14</code>   </td><td class="markdownTableBodyNone">tells the total number of icons    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>0</code>   </td><td class="markdownTableBodyNone">always    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone">modifies the appearance of the user control (combination of the constants starting with <code>CS258_</code> in <code>UCDefs.h</code>)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone">is <code>CS258_HEADER</code> ⇒ the pop-up palette will have a header    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>2</code>   </td><td class="markdownTableBodyNone">is <code>CS258_MOUSEPOSOPEN</code> ⇒ the pop-up palette will appear relative to the mouse position, (as opposed to the control's rectangle)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>4</code>   </td><td class="markdownTableBodyNone">is <code>CS258_SIMPLEFRAME</code> ⇒ the pop-up palette will have a simpler frame (Windows only)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>32510</code>   </td><td class="markdownTableBodyNone">id of the icon resource; contains all the icons. This icon is cut into pieces to create the individual icons. This also servers as the resource ID of the title strings, if the popup palette has a header (CS258_HEADER).   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md16"></a>
UserControl 259</h2>
<p>This control is an icon-based control. The icons coming from the specified resource are layed out flat.</p>
<p>Example: type selector in the library browser.</p>
<div class="image">
<img src="259.png" alt=""/>
</div>
<p>The generic format of this control is: </p><pre class="fragment">UserControl   12  8  30  28  259  1  3  0  0  32510
</pre><p> Let's see the 'numbers' one by one:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Item   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>UserControl</code>   </td><td class="markdownTableBodyNone">the type of the dialog item    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>12 8 30 28</code>   </td><td class="markdownTableBodyNone">the item's rectangle (top, left, width, height)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>259</code>   </td><td class="markdownTableBodyNone">the type of the user control    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone">specifies the number of rows you would like to see the icons    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>3</code>   </td><td class="markdownTableBodyNone">tells the total number of icons    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>0</code>   </td><td class="markdownTableBodyNone">always    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>0</code>   </td><td class="markdownTableBodyNone">always    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>32510</code>   </td><td class="markdownTableBodyNone">id of the icon resource; contains all the icons   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md17"></a>
UserControl 261</h2>
<p>This control is the line type pop-up control. The content of the button is updated as the user moves the mouse above the palette. The specialty of this control is that it calls back to the server application to draw the line type into the control.</p>
<p>Example: any line type pop-up.</p>
<div class="image">
<img src="261.png" alt=""/>
</div>
<p>The generic format of this control is: </p><pre class="fragment">UserControl   42  0  260  40  261  0x0100   /* Line type for Line Tool */
</pre><p> Let's see the 'numbers' one by one:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Item   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Example    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>UserControl</code>   </td><td class="markdownTableBodyNone">the type of the dialog item   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>42 0 260 40</code>   </td><td class="markdownTableBodyNone">the item's rectangle (top, left, width, height)   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>261</code>   </td><td class="markdownTableBodyNone">the type of the user control   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>0x0100</code>   </td><td class="markdownTableBodyNone">the upper byte modifies the appearance of the user control (see the constants starting with <code>CS261_</code> in <code>UCDefs.h</code>) the lower byte is always <code>00</code>   </td><td class="markdownTableBodyNone"><code>0x01</code> is <code>CS261_HEADER</code>, so the pop-up palette will have a header.   </td></tr>
</table>
<ol type="1">
<li><p class="startli">I receive this error message: "This add-on cannot be validated. Please contact the distributor." What is the problem?</p>
<p class="startli">Several problems may lead to this message:</p><ul>
<li>The add-on cannot be loaded, because the dll / shared library cannot be loaded. This usually indicates a missing library, or some initialization failure. The first problem can be detected by the Depends.exe application on Windows (it's part of the MS tool suite). On Mactel, the 'otool -L' Terminal command lists the frameworks referred by the add-on. The second problem is usually in the add-on's code :))</li>
<li>The add-on was not compiled with the DevKit required by the server application.</li>
<li>The add-on doesn't have an 'MDID' resource, or the 'MDID' resource doesn't contain valid information. This may be caused by:<ul>
<li><em>Mac:</em> the add-on doesn't have a resource fork, because of an invalid transfer through internet or file system.</li>
<li>the MDID resource was not compiled into the add-on.</li>
<li>the MDID resource contains demo IDs (e.g. developer ID is 1 and the local ID is 1)</li>
<li>the MDID clashes with another add-on's MDID; in this case Archicad refuses to load any of these add-ons.</li>
<li>there's a typo in the developer ID, or in the authorization code. In this case the generated local ID looks valid, but Archicad still rejects to load the add-on. Try to double-check the ID and the code with Graphisoft.</li>
</ul>
</li>
</ul>
</li>
<li>How do I create a template library part to be used in my add-on?<ol type="a">
<li>Create a new library part in Archicad, and insert it into the correct place in the subtype hierarchy with the <b>Select Subtype</b> button: (in this example I shall insert the object as the subtype of Model Element). Also check the '<b>Use as subtype</b>' checkbox. <div class="image">
<img src="lp_template1.png" alt=""/>
</div>
 Then save this object as, let's say "Zoom GDL Object". You can check whether this has been inserted into the object hierarchy correctly if you bring up the <em>File</em> / <em>GDL Object</em> / <em>Open Object by Subtype...</em> dialog. <div class="image">
<img src="lp_template2.png" alt=""/>
</div>
</li>
<li>Add this 'Zoom GDL Object' to your Add-On in a FILE resource: The name of the resource ("Zoom Object.gsm") will appear in the Object Settings dialog, and the content of the resource refers to name of the file ("Zoom GDL Object.gsm") you would like to include in your add-on. 'FILE' 132 "Zoom Object.gsm" { "Zoom GDL Object.gsm" }</li>
<li>Call <a class="el" href="group___add_on_integration.html#ga971703b8ea845703fcc9c14401f2ea55">ACAPI_AddOnIntegration_RegisterBuiltInLibrary</a> from your <code>RegisterInterface ()</code> function.</li>
<li>If you want to create a new object whose parent is this object in the subtype hierarchy, then before calling <a class="el" href="group___library_part.html#ga994b54879d6ca52fd828604434efc978">ACAPI_LibraryPart_Create</a> fill in the <code>parentUnID</code> field of the <a class="el" href="struct_a_p_i___lib_part.html">API_LibPart</a> structure this way: ACAPI_LibraryPart_GetBuiltInLibpartUnId (132, libPart.parentUnID); // 132 is the 'FILE' resource ID</li>
<li>Set the <code>placeable</code>, and clear the <code>template</code> field of the <code><a class="el" href="struct_a_p_i___lib_part.html" title="Definition of a Library Part.">API_LibPart</a></code> structure.</li>
<li>After this you can call <a class="el" href="group___library_part.html#ga994b54879d6ca52fd828604434efc978">ACAPI_LibraryPart_Create</a>, and the library part will be inserted into the correct place in the subtype hierarchy.</li>
</ol>
</li>
<li><p class="startli">How do I create an associative dimension in Archicad?</p>
<p class="startli">An example from the Automatic Dimensioning add-on shows how you can convert the old neig IDs to the new <code>bool</code> fields in <a class="el" href="struct_a_p_i___base.html">API_Base</a> : </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span>    NeigID2Line (<a class="code hl_enumeration" href="group___element.html#ga58ee0e482d4747dc7bf3302cd7551272">API_NeigID</a> neigID)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> (neigID == APINeig_WallOn        ||</div>
<div class="line">            neigID == APINeig_WallPlOn      ||</div>
<div class="line">            neigID == APINeig_WallPlOnClOff ||</div>
<div class="line">            neigID == APINeig_BeamOn        ||</div>
<div class="line">            neigID == APINeig_CeilOn        ||</div>
<div class="line">            neigID == APINeig_RoofOn        ||</div>
<div class="line">            neigID == APINeig_MeshOn        ||</div>
<div class="line">            neigID == APINeig_HatchOn       ||</div>
<div class="line">            neigID == APINeig_LineOn        ||</div>
<div class="line">            neigID == APINeig_ArcOn         ||</div>
<div class="line">            neigID == APINeig_SplineOn      ||</div>
<div class="line">            neigID == APINeig_CurtainWallOn ||</div>
<div class="line">            neigID == APINeig_CurtainWallCutOn);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span>    NeigID2Special (<a class="code hl_enumeration" href="group___element.html#ga58ee0e482d4747dc7bf3302cd7551272">API_NeigID</a> neigID)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> (neigID == APINeig_WallPl    || neigID == APINeig_WallPlOn ||</div>
<div class="line">            neigID == APINeig_WallPlClOff || neigID == APINeig_WallPlOnClOff ||</div>
<div class="line">            neigID == APINeig_BeamHole  ||</div>
<div class="line">            neigID == APINeig_WindHole  ||</div>
<div class="line">            neigID == APINeig_DoorHole  ||</div>
<div class="line">            neigID == APINeig_MeshRidge || neigID == APINeig_MeshRidgeOn ||</div>
<div class="line">            neigID == APINeig_CurtainWallCut  || neigID == APINeig_CurtainWallCutOn);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> MakeDimelemForWD (<a class="code hl_struct" href="struct_a_p_i___dim_elem.html">API_DimElem</a>* dimelem, <span class="keyword">const</span> MyCoord&amp; mc)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">const</span> WallRef&amp; wr : mc.wrs) {</div>
<div class="line">        <span class="keywordflow">if</span> (wr.m_openingpt != NOOPENINGPT) {</div>
<div class="line">            <span class="keywordflow">switch</span> (wr.m_openingType.typeID) {</div>
<div class="line">                <span class="keywordflow">case</span> API_WindowID:</div>
<div class="line">                <span class="keywordflow">case</span> API_DoorID:</div>
<div class="line">                    <span class="keywordflow">switch</span> (wr.m_openingpt) {</div>
<div class="line">                        <span class="keywordflow">case</span> OPENINGWH0:</div>
<div class="line">                        <span class="keywordflow">case</span> OPENINGWH1:</div>
<div class="line">                        <span class="keywordflow">case</span> OPENINGN0:</div>
<div class="line">                        <span class="keywordflow">case</span> OPENINGN1:</div>
<div class="line">                        <span class="keywordflow">case</span> OPENINGU0:</div>
<div class="line">                        <span class="keywordflow">case</span> OPENINGU1:</div>
<div class="line">                        <span class="keywordflow">case</span> OPENINGR0:</div>
<div class="line">                        <span class="keywordflow">case</span> OPENINGR1:</div>
<div class="line">                        <span class="keywordflow">case</span> OPENINGE0:</div>
<div class="line">                        <span class="keywordflow">case</span> OPENINGE1:</div>
<div class="line">                        <span class="keywordflow">case</span> OPENINGL0:</div>
<div class="line">                        <span class="keywordflow">case</span> OPENINGL1:</div>
<div class="line">                            dimelem-&gt;<a class="code hl_variable" href="struct_a_p_i___dim_elem.html#a868c03ef83228c70c23c1d8a75fb07ea">base</a>.<a class="code hl_variable" href="struct_a_p_i___dim_base.html#a420036a09eebe7cd556c872302fe034f">base</a> = wr.m_base;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">default</span>:</div>
<div class="line">                            dimelem-&gt;<a class="code hl_variable" href="struct_a_p_i___dim_elem.html#a868c03ef83228c70c23c1d8a75fb07ea">base</a>.<a class="code hl_variable" href="struct_a_p_i___dim_base.html#a420036a09eebe7cd556c872302fe034f">base</a> = wr.m_base;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> API_CurtainWallFrameID:</div>
<div class="line">                    dimelem-&gt;<a class="code hl_variable" href="struct_a_p_i___dim_elem.html#a868c03ef83228c70c23c1d8a75fb07ea">base</a>.<a class="code hl_variable" href="struct_a_p_i___dim_base.html#a420036a09eebe7cd556c872302fe034f">base</a> = wr.m_base;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">if</span> (wr.m_openingPtType == CORNERCORNER) {</div>
<div class="line">                dimelem-&gt;<a class="code hl_variable" href="struct_a_p_i___dim_elem.html#a868c03ef83228c70c23c1d8a75fb07ea">base</a>.<a class="code hl_variable" href="struct_a_p_i___dim_base.html#a420036a09eebe7cd556c872302fe034f">base</a>.<a class="code hl_variable" href="struct_a_p_i___base.html#ac01d0a7e7abb82f34b80115711d1cd73">type</a>    = API_WindowID;</div>
<div class="line">                dimelem-&gt;<a class="code hl_variable" href="struct_a_p_i___dim_elem.html#a868c03ef83228c70c23c1d8a75fb07ea">base</a>.<a class="code hl_variable" href="struct_a_p_i___dim_base.html#a420036a09eebe7cd556c872302fe034f">base</a>.<a class="code hl_variable" href="struct_a_p_i___base.html#a4a3997a59df73a401c10d534c4b874cc">special</a> = <span class="keyword">false</span>;</div>
<div class="line">                dimelem-&gt;<a class="code hl_variable" href="struct_a_p_i___dim_elem.html#a868c03ef83228c70c23c1d8a75fb07ea">base</a>.<a class="code hl_variable" href="struct_a_p_i___dim_base.html#a420036a09eebe7cd556c872302fe034f">base</a>.<a class="code hl_variable" href="struct_a_p_i___base.html#a434fa8684c1206a306cf64a7baf00b61">line</a>    = <span class="keyword">false</span>;</div>
<div class="line">                dimelem-&gt;<a class="code hl_variable" href="struct_a_p_i___dim_elem.html#a868c03ef83228c70c23c1d8a75fb07ea">base</a>.<a class="code hl_variable" href="struct_a_p_i___dim_base.html#a420036a09eebe7cd556c872302fe034f">base</a>.<a class="code hl_variable" href="struct_a_p_i___base.html#a9761aaf366a25c1e008b7c6800fc5d4e">inIndex</a> = wr.m_inIndex;</div>
<div class="line">                dimelem-&gt;<a class="code hl_variable" href="struct_a_p_i___dim_elem.html#a868c03ef83228c70c23c1d8a75fb07ea">base</a>.<a class="code hl_variable" href="struct_a_p_i___dim_base.html#a420036a09eebe7cd556c872302fe034f">base</a>.<a class="code hl_variable" href="struct_a_p_i___base.html#a93c3ace46b16acb6e8159ac1589514d2">guid</a>    = wr.m_guid;</div>
<div class="line">                <span class="keywordflow">return</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Error if it comes here...</span></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="ttc" id="agroup___element_html_ga58ee0e482d4747dc7bf3302cd7551272"><div class="ttname"><a href="group___element.html#ga58ee0e482d4747dc7bf3302cd7551272">API_NeigID</a></div><div class="ttdeci">API_NeigID</div><div class="ttdoc">Describes the various special points of elements.</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:23488</div></div>
<div class="ttc" id="astruct_a_p_i___base_html_a434fa8684c1206a306cf64a7baf00b61"><div class="ttname"><a href="struct_a_p_i___base.html#a434fa8684c1206a306cf64a7baf00b61">API_Base::line</a></div><div class="ttdeci">bool line</div><div class="ttdoc">True in case of APINeig_WallOn, APINeig_WallPlOn, APINeig_BeamOn, APINeig_CeilOn, APINeig_RoofOn,...</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:7751</div></div>
<div class="ttc" id="astruct_a_p_i___base_html_a4a3997a59df73a401c10d534c4b874cc"><div class="ttname"><a href="struct_a_p_i___base.html#a4a3997a59df73a401c10d534c4b874cc">API_Base::special</a></div><div class="ttdeci">char special</div><div class="ttdoc">True in case of APINeig_WallPl, APINeig_WallPlOn, APINeig_BeamHole, APINeig_WindHole,...</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:7757</div></div>
<div class="ttc" id="astruct_a_p_i___base_html_a93c3ace46b16acb6e8159ac1589514d2"><div class="ttname"><a href="struct_a_p_i___base.html#a93c3ace46b16acb6e8159ac1589514d2">API_Base::guid</a></div><div class="ttdeci">API_Guid guid</div><div class="ttdoc">The unique identifier of the base element.</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:7781</div></div>
<div class="ttc" id="astruct_a_p_i___base_html_a9761aaf366a25c1e008b7c6800fc5d4e"><div class="ttname"><a href="struct_a_p_i___base.html#a9761aaf366a25c1e008b7c6800fc5d4e">API_Base::inIndex</a></div><div class="ttdeci">Int32 inIndex</div><div class="ttdoc">InIndex of the base element's node (see API_Neig).</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:7775</div></div>
<div class="ttc" id="astruct_a_p_i___base_html_ac01d0a7e7abb82f34b80115711d1cd73"><div class="ttname"><a href="struct_a_p_i___base.html#ac01d0a7e7abb82f34b80115711d1cd73">API_Base::type</a></div><div class="ttdeci">API_ElemType type</div><div class="ttdoc">The type of the base element.</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:7745</div></div>
<div class="ttc" id="astruct_a_p_i___dim_base_html_a420036a09eebe7cd556c872302fe034f"><div class="ttname"><a href="struct_a_p_i___dim_base.html#a420036a09eebe7cd556c872302fe034f">API_DimBase::base</a></div><div class="ttdeci">API_Base base</div><div class="ttdoc">The base element.</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:7816</div></div>
<div class="ttc" id="astruct_a_p_i___dim_elem_html"><div class="ttname"><a href="struct_a_p_i___dim_elem.html">API_DimElem</a></div><div class="ttdoc">Describes a dimension element.</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:7837</div></div>
<div class="ttc" id="astruct_a_p_i___dim_elem_html_a868c03ef83228c70c23c1d8a75fb07ea"><div class="ttname"><a href="struct_a_p_i___dim_elem.html#a868c03ef83228c70c23c1d8a75fb07ea">API_DimElem::base</a></div><div class="ttdeci">API_DimBase base</div><div class="ttdoc">The dimensioned point.</div><div class="ttdef"><b>Definition:</b> APIdefs_Elements.h:7843</div></div>
</div><!-- fragment --></li>
<li><p class="startli">_(Win only) My add-on runs perfectly on my development machine, but when I install it on a demo machine it refuses to load._</p>
<p class="startli">This usually happens from one of the following reasons:</p><ul>
<li>Visual Studio installs its own runtime libraries (MSVCxx.DLL and MSVCPxx.DLL) in the WINNT\System32 folder, and the APX is usually dynamically linked to those, i.e. it expects the DLLs to be there. On the systems you didn't install Visual Studio, the DLLs are simply not there. You can try to solve this by copying those files over to the appropriate place from the machines where you have Visual Studio installed. <em>Note:</em> Archicad installs the necessary runtime libraries if they are not there.</li>
<li>You are trying to install a debug version of your add-on onto the demo machine. This won't work, because it is linked to the debug libraries of Visual Studio, which are not present on the demo machine. Compile a release version instead.</li>
</ul>
</li>
<li><p class="startli"><em>Can I compile a GDL add-on, which uses the services of the General API DevKit?</em></p>
<p class="startli">No. GDL add-ons use their own API environment, and that mixes quite badly with the General API running environment.</p>
</li>
<li><p class="startli"><em>How can I catch notifications immediately?</em></p>
<p class="startli">Return <code>APIAddon_Preload</code> from your <code>CheckEnvironment ()</code> function. This will ensure that your <code>Initialize ()</code> function will be called immediately after the call to <code>Registerface ()</code>, without requiring the user to perform any action. You can then safely install the notification callback function(s) from <code>Initialize ()</code>.</p>
</li>
<li><em>We defined an icon in the GRC file in the 3.1 DevKit, but they doesn't seem to appear with the newer devkits, and I also receive a resource conversion error. Also, what do those three numbers mean in the resource?</em> <pre class="fragment">'GICN' 32501 "General Settings" {
0  128  128
}
</pre> The '0 128 128' is the R/G/B color (respectively) of the transparent area in the icon; each component is in the range 0-255. The reason why is doesn't compile with DevKit 6.1 is because some of the colors (black and white) should be in fixed places within the icon's color table: black should be the first color, and white should be the last. Note that the icons are converted to 32-bit depth, so you cannot use arbitrary big sizes.</li>
<li><p class="startli"><em>I'm creating a library part from my add-on, and I also put in a preview picture, but it doesn't appear.</em></p>
<p class="startli">From Archicad 8 you should add the MIME type of the preview picture as a C string (with the terminating <code>0</code>) to the beginning of the data handle containing the preview picture. (e.g. "image/png\\0" for a PNG image)</p>
</li>
<li><p class="startli"><em>Is there a default callback for the simple popup menu-like custom control?</em></p>
<p class="startli">No. You'll have to write your own callback to load the data from your resource file, and pass it to the user control with <code>UC257SetData</code>. You'll also have to call <code>UC257SetType</code>, and possibly <code>UC257SetStyle</code>. The DG_Test example now shows how you can work with these functions.</p>
</li>
<li><p class="startli">_(Win only) When I link my add-on, I receive the following warning: <code>LINK : warning LNK4098: defaultlib "MSVCRT" conflicts with use of other libs; use /NODEFAULTLIB:library</code>_</p>
<p class="startli">This only means that you are compiling the debug version of your add-on (thus linking to the debug version of the runtime DLLs), whereas the libraries shipped with the DevKit are release versions (which are linked to the release version of the runtime DLLs). This doesn't cause any problem.</p>
</li>
<li><p class="startli"><em>How can I open a progress window when I have a long process running?</em></p>
<p class="startli">In several ways:</p><ol type="a">
<li>use the set of functions (<a class="el" href="group___process_window.html#gacda3bc51b8d878d8494d313ecac47023">ACAPI_ProcessWindow_InitProcessWindow</a>, etc.) provided by the API. This has a small problem: other processes within Archicad are using the same progress window, and they can interfere with the information displayed by your add-on.</li>
<li>use your own modeless palette as a process window.</li>
<li>open a modal dialog, and drive the process from there. Since DevKit v4.1 you can switch databases even if a modal dialog is visible on the screen. See the <code>Do_ProgressWindow</code> function in the <em>DG_Test</em> example. This is the recommended solution at the moment.</li>
</ol>
</li>
<li><p class="startli"><em>I have a function which adjusts the additional parameter values of a placed object/window/door. It works fine in Archicad 7, but not in Archicad 8 or 9.</em></p>
<p class="startli">This problem usually occurs when you refer to the additional parameters by <em>indices:</em></p>
<p class="startli"><code>(*memo.params)[27].value.real = 7.25;</code></p>
<p class="startli">The problem is coming from the subtype hierarchy: an object/window/door in the hierarchy <em>inherits</em> the parameters of all of its ancestors. So, you should refer to a parameter by <em>name</em> instead of its index. This also means you'll have to look up the parameter by name before modify its value: </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> SetParValue (<a class="code hl_struct" href="struct_a_p_i___add_par_type.html">API_AddParType</a> *** addPars, <span class="keyword">const</span> <span class="keywordtype">char</span> * name, <span class="keyword">const</span> <span class="keywordtype">double</span> &amp;val)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (addPars == <span class="keyword">nullptr</span> || *addPars == <span class="keyword">nullptr</span>)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    Int32 ii, addParNum = BMGetHandleSize (<span class="keyword">reinterpret_cast&lt;</span>GSHandle<span class="keyword">&gt;</span> (*addPars)) / <span class="keyword">sizeof</span> (<a class="code hl_struct" href="struct_a_p_i___add_par_type.html">API_AddParType</a>);</div>
<div class="line">    <span class="keywordflow">for</span> (ii = 0; ii &lt; addParNum; ii++) {</div>
<div class="line">        <span class="keywordflow">if</span> (CHCompareCStrings ((**addPars)[ii].name, name, CS_CaseInsensitive) == 0) {</div>
<div class="line">            (**addPars)[ii].value.real = val;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}   <span class="comment">// SetParValue</span></div>
<div class="ttc" id="astruct_a_p_i___add_par_type_html"><div class="ttname"><a href="struct_a_p_i___add_par_type.html">API_AddParType</a></div><div class="ttdoc">Describes a parameter of a Library Part.</div><div class="ttdef"><b>Definition:</b> APIdefs_LibraryParts.h:604</div></div>
</div><!-- fragment --></li>
<li><p class="startli"><em>When I read 3D data for an element I don't get the correct 3D-vertex world-coordinates. They are local coordinates for that element. So how can I retrieve the correct vertex information in world coordinates of an element?</em></p>
<p class="startli">Each 3D body contains a transformation matrix (see <a class="el" href="struct_a_p_i___body_type.html">API_BodyType</a>), which should be applied to the coordinates of the vertices. This allows us to store a body which has several instances very compactly (i.e. store the vertices just once, and have a different transformation matrix for every instance).</p>
</li>
<li><p class="startli"><em>How can I make the standard DXF/DWG add-on export elements into DWG file?</em></p>
<p class="startli">You can find a simple example at the description of the <a class="el" href="group___add_on_add_on_communication.html#gac797d2bc036dba642c16c6c21848565a">ACAPI_AddOnAddOnCommunication_Call</a> function. </p>
</li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
</body>
</html>